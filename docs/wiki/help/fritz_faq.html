<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>
      help/fritz_faq – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="fritz_faq%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../help.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="https://www.google.com/search" method="get" onsubmit="; this.elements.namedItem('q').value = this.elements.namedItem('oq').value + ' site:freetz.github.io'">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="oq" size="18" value="" />
          <input type="hidden" name="q" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><li class="last"><a href="../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="fritz_faq.html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="/wiki/help/fritz_faq.en" title="(not available)">English</a></li></ul></div><p /><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="../help.html" title="Zeige help an">help</a><span class="pathentry sep">/</span><a class="pathentry" href="fritz_faq.html" title="Zeige help/fritz_faq an">fritz_faq</a>
</div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">

          <div id="wikipage" class="trac-content"><h1 id="FAQ">FAQ</h1>
<p>
</p><div class="wiki-toc"><h4>FAQ</h4><ol><li><ol><li><a href="fritz_faq.html#WiekannicheineneigenenanderenDNS-ServerfüralleangeschlossenenPCsundFritzboxverwenden">Wie kann ich einen eigenen/anderen DNS-Server für alle angeschlossenen PCs &hellip;</a></li><li><a href="fritz_faq.html#Wiekannmancharacterdeviceserstellen">Wie kann man character devices erstellen?</a></li><li><a href="fritz_faq.html#WasfüreinNetzwerkkabelbenötigeichfürdasrecovern">Was für ein Netzwerkkabel benötige ich für das recovern ?</a></li><li><a href="fritz_faq.html#WoranerkenneichdassicheineFB7270v3habe">Woran erkenne ich, dass ich eine FB 7270v3 habe ?</a></li><li><a href="fritz_faq.html#WiealtistmeineFritzBox">Wie alt ist meine FritzBox ?</a></li><li><a href="fritz_faq.html#WievielFlashhatmeineFritzBox7270">Wie viel <strong>Flash</strong> hat meine FritzBox 7270 ?</a></li><li><a href="fritz_faq.html#SteuercodesfürdieFritzbox">Steuercodes für die Fritzbox</a></li><li><a href="fritz_faq.html#HilfedieBoxisttotalverkonfiguriertFreetzNot-AUS">Hilfe, die Box ist total verkonfiguriert / Freetz "Not-AUS"</a></li></ol></li></ol></div><p> Während das FAQ zu Freetz spezifischen Fragen <a class="wiki" href="../FAQ.html">hier</a> zu finden ist sollen hier allgemeine Fragen und Antworten zur FritzBox gesammelt werden.
</p>
<h3 id="WiekannicheineneigenenanderenDNS-ServerfüralleangeschlossenenPCsundFritzboxverwenden">Wie kann ich einen eigenen/anderen DNS-Server für alle angeschlossenen PCs und Fritzbox verwenden ?</h3>
<p>
AVM lässt die Änderung des default DNS-Servers, den die Box nutzt, im Gegensatz zu anderen Routern über die Benutzeroberfläche derzeit(Ende 2009) nicht zu. Mögliche Lösungswege:
</p>
<ul><li>dnsmasq: Installation eines eigenen DNS-Servers auf der Fritzbox mittels dem Packet <a class="wiki" href="../packages/dnsmasq.html">dnsmasq</a>. Dies ist ein allgemeiner Weg der auf jeder Box funktioniert, jedoch einen Neubau des Images (freetzen) erfordert. Zusammen mit einer geänderten Datei /etc/resolv.conf (im Trunk möglich über die GUI mit  "Einstellungen"&rarr;"Freetz: resolv.conf") kann ein DNS-Server so eingetragen werden: "nameserver 208.67.220.220" (hier der von OpenDNS)
</li><li>ohne dnsmasq: Bei einigen Boxen, z.B. 7170(Firmware 29.04.76) ist es möglich die zentrale Konfigurationsdatei von AVM zu bearbeiten. Mit "nvi /var/flash/ar7.cfg" müssen alle Vorkommen von "overwrite_dns1 = xxx.xxx.xxx.xxx" und "overwrite_dns2 = xxx.xxx.xxx.xxx" bearbeitet werden. Dieser Weg ist nur Personen empfohlen die Grundkenntnisse mit nvi und telnet bzw. ssh/telnet haben! Hier läuft der multid von AVM als DNS-Server. in der resolv.conf steht ein loopback "nameserver 127.0.0.1". Dies ermöglicht auch Linux standard Anwendungen auf der fritzbox die Auflösung über den multid.
</li><li>Ändern von /etc/resolv.conf: Wenn es nur darum geht, dass die Box selbst einen anderen DNS-Server benutzt, reicht eine Änderung in der Datei /etc/resolv.conf wie oben beim dnsmasq beschrieben. Dies ändert allein jedoch nur die Namensauflösung der Box, angeschlossene Clients nutzen dann weiter den Standard-DNS
</li></ul><h3 id="Wiekannmancharacterdeviceserstellen">Wie kann man character devices erstellen?</h3>
<p>
Freetz benutzt auch ein solches <em><a class="ext-link" href="http://en.wikipedia.org/wiki/Character_device#Character_devices"><span class="icon">​</span>character device</a></em>, welches Dateien mit Hilfe eines Tiny Flash Filesystems (TFFS) dauerhaft und veränderbar im Flash abspeichert, um die Konfiguration zu sichern. Vorraussetzung ist eine Minor Nummer, die von keinem anderen character device in <tt>/var/flash/</tt> verwendet wird (Freetz benutzt die Minor 0x3c), die Major Nummer kann aus <tt>/proc/devices</tt> ausgelesen werden:
</p>
<pre class="wiki">mknod /var/flash/&lt;dateiname&gt; c &lt;major&gt; &lt;minor&gt;
</pre><p>
Da dieses character device in der <a class="ext-link" href="http://de.wikipedia.org/wiki/RAM-Disk"><span class="icon">​</span>Ramdisk</a> unter <tt>/var/</tt> erzeugt wurde, muss dieser Befehl jedesmal beim Neustart ausgeführt werden. Der Inhalt bleibt aber erhalten. <img src="../../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> Zum Bearbeiten solcher character devices <strong>niemals</strong> vi verwenden! Dafür gibt es das Wrapper-Skript nvi.
</p>
<p>
<img src="../../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> <strong>ACHTUNG:</strong> Die Flash Partition des TFFS ist sehr klein und nicht geeignet Dateien &gt; 10-30 KB aufzunehmen (je nach Größe der anderen Dateien).
</p>
<p>
Der aktuelle Füllstand kann wie folgt ausgelesen werden:
</p>
<div class="code"><pre><span class="nb">echo</span> <span class="s1">'cleanup'</span> &gt; /proc/tffs
<span class="nb">echo</span> <span class="s1">'info'</span> &gt; /proc/tffs
cat /proc/tffs | grep <span class="s1">'^fill='</span>
</pre></div><h3 id="WasfüreinNetzwerkkabelbenötigeichfürdasrecovern">Was für ein Netzwerkkabel benötige ich für das recovern ?</h3>
<blockquote>
<p>
RJ45 Standardnetzwerkkabel, kein Crossover
</p>
</blockquote>
<h3 id="WoranerkenneichdassicheineFB7270v3habe">Woran erkenne ich, dass ich eine FB 7270v3 habe ?</h3>
<ul><li>An der Firmwareversion. Firmwares für 7270v3 beginnen mit 74.xx.xx
</li><li>An der Anzeige im AVM-Web-Interface <a class="ext-link" href="http://fritz.box"><span class="icon">​</span>http://fritz.box</a>, z.B. <strong>Produktinformationen</strong>: FRITZBox Fon WLAN 7270 v3 (UI)
</li><li>Anhand der Seriennummer (s.u.)
</li></ul><h3 id="WiealtistmeineFritzBox">Wie alt ist meine FritzBox ?</h3>
<p>
Benötig werden dazu die ersten vier Stellen der Seriennummer:<br />
Beispiel: <strong>W484</strong>-xxx-xx-xxx-xxx &rArr; <strong>Donnerstag, den 27.11.2008</strong>
</p>
<p>
<strong>W484 = Produktionswoche (Achtung: bitte nicht verwechseln mit der Kalenderwoche) 48 und 4. Tag = Donnerstag</strong><br />
</p>
<blockquote>
<table class="wiki">
<tr><td> <strong>Buchstabe</strong> </td><td> <strong>Baujahr</strong>
</td></tr><tr><td> U </td><td> 2006
</td></tr><tr><td> V </td><td> 2007
</td></tr><tr><td> W </td><td> 2008
</td></tr><tr><td> X </td><td> 2009
</td></tr><tr><td> A </td><td> 2010
</td></tr><tr><td> B </td><td> 2011
</td></tr><tr><td> C </td><td> 2012
</td></tr></table>
</blockquote>
<p>
<strong>Info:</strong>  Wo liegt der Unterschied zwischen Produktionswoche und Kalenderwoche:<br />
<br />
In meinem Beispiel ist die Produktionswoche = der Kalenderwoche, aber z.B. im Jahr 2010 unterscheiden sich die Tage etwas:<br />
A101 = Kalenderwoch 10 = sollte einen Montag in der 10 KW, also 08.03.2010 ergeben, das ist aber falsch, <br />
A101 = Produktionswoche 10 ergibt einen Montag in der 9 KW und zwar den 01.03.2010 <br />
Quelle meiner Behauptung: - Wird nachgeliefert.
</p>
<h3 id="WievielFlashhatmeineFritzBox7270">Wie viel <strong>Flash</strong> hat meine FritzBox 7270 ?</h3>
<p>
Für die zweite  Ziffern-Gruppe (xxxx-<strong>XXX</strong>-xxx-xxx)  sind bislang folgende Nummern aufgetreten:<br />
</p>
<blockquote>
<table class="wiki">
<tr><td> <strong>Nummer</strong> </td><td> <strong>HWRevision</strong> </td><td> <strong>Branding</strong> </td><td> <strong>Flashgröße (in MB)</strong> </td><td> <strong>Farbe</strong> </td><td> <strong>Version</strong> </td><td> <strong>Kommentar</strong>
</td></tr><tr><td> 293 </td><td> 122 </td><td> AVM </td><td> 8 </td><td> rot </td><td> 7270 V1 </td><td>
</td></tr><tr><td> 294 </td><td> 122 </td><td> 1und1 </td><td> 8 </td><td> schwarz / silber </td><td> 7270 V1 </td><td>
</td></tr><tr><td> 304 </td><td> 139 </td><td> AVM </td><td> 16 </td><td> rot </td><td> 7270 V2 </td><td>
</td></tr><tr><td> 305 </td><td> 139 </td><td> 1und1 </td><td> 16 </td><td> schwarz / silber </td><td> 7270 V2 </td><td>
</td></tr><tr><td> 336 </td><td> 139 </td><td> AVM </td><td> 16 </td><td> rot </td><td> 7270 V2 </td><td> für Kabel Deutschland-Kunden
</td></tr><tr><td> 334 </td><td> 145 </td><td> 1und1 </td><td> 16 </td><td> schwarz </td><td> 7270 V3 </td><td>
</td></tr><tr><td> 351 </td><td> 145 </td><td> AVM </td><td> 16 </td><td> rot </td><td> 7270 V3 </td><td>
</td></tr><tr><td> 352 </td><td> 145 </td><td> otwo </td><td> 16 </td><td> rot </td><td> 7270 V3 </td><td> für o2-Kunden
</td></tr><tr><td> 354 </td><td> 145 </td><td> AVM </td><td> 16 </td><td>  rot </td><td style="text-align: left">7270 V3 </td><td> für Netcologne-Kunden
</td></tr><tr><td> 355 </td><td> 145 </td><td> EWE </td><td> 16 </td><td> weiß / grau </td><td> 7270 V3 </td><td> für EWE-Kunden
</td></tr><tr><td> 307 </td><td> 139 </td><td> AVME </td><td> 16 </td><td> rot </td><td> 7270 V2 </td><td> Internationale-Version
</td></tr><tr><td> 310 </td><td> 139 </td><td> AVME </td><td> 16 </td><td> rot </td><td> 7270 V2 </td><td> A-/CH-Version
</td></tr></table>
</blockquote>
<p>
Beispiel: W484-<strong>305</strong>-xx-xxx-xxx &rArr; Fritzbox mit 16MB und 1und1-Branding<br />
</p>
<p>
oder
</p>
<p>
1.) Support Datei auslesen über: <a class="ext-link" href="http://fritz.box/html/support.html"><span class="icon">​</span>http://fritz.box/html/support.html</a> <br /> 2.) In der Datei sollte folgender Eintrag zu finden sein:<br />
</p>
<ul><li>8MB: <strong>flashsize 0x00800000</strong>
</li><li>16MB: <strong>flashsize 0x01000000</strong>
</li></ul><p>
00800000 Hex = 8.388.608 Dezimal = 8.192 KB = 8 MB<br /> 01000000 Hex = 16.777.216 Dezimal = 16.384 KB = 16 MB<br /> <br /> Weitere Details sind <a class="ext-link" href="http://www.ip-phone-forum.de/showpost.php?p=1124950&amp;postcount=2"><span class="icon">​</span>[hier]</a> beschrieben.
</p>
<h3 id="SteuercodesfürdieFritzbox">Steuercodes für die Fritzbox</h3>
<p>
Hier findet Ihr eine (unvollständige) Liste der Steuercodes für Eure Fritzbox:
</p>
<blockquote>
<table class="wiki">
<tr><td> <strong>Telefoncode</strong> </td><td> <strong>Funktion</strong>
</td></tr><tr><td> #96*0* </td><td> WLAN ausschalten
</td></tr><tr><td> #96*1* </td><td> WLAN einschalten
</td></tr><tr><td> #96*2* </td><td> CAPI over TCP (NetCAPI) ausschalten
</td></tr><tr><td> #96*3* </td><td> CAPI over TCP (NetCAPI) einschalten
</td></tr><tr><td> #96*4* </td><td> Anrufmonitor ausschalten
</td></tr><tr><td> #96*5* </td><td> Anrufmonitor einschalten
</td></tr><tr><td> #96*6* </td><td> Anzeige: "Kein Bier vor 4" oder "Bier holen"
</td></tr><tr><td> #96*7* </td><td> telnetd einschalten
</td></tr><tr><td> #96*8* </td><td> telnetd ausschalten
</td></tr><tr><td> #96*9* </td><td> Anzeige: Uptime des Routers
</td></tr><tr><td> #990*15901590* </td><td> Reboot der Fritzbox
</td></tr><tr><td> #991*15901590* </td><td> Rücksetzen auf Werkseinstellungen
</td></tr><tr><td> #83*hhmmddmmyyyy* </td><td> Uhr stellen
</td></tr></table>
</blockquote>
<h3 id="HilfedieBoxisttotalverkonfiguriertFreetzNot-AUS">Hilfe, die Box ist total verkonfiguriert / Freetz "Not-AUS"</h3>
<p>
Jetzt ist es passiert: Paket konfiguriert und dabei irgendwas so verstellt, dass die Box nicht mehr erreichbar ist. Auch in so einem Fall gibt es noch eine Möglichkeit vor dem Recover:
</p>
<p>
<a class="ext-link" href="http://www.voipfans.de/showthread.php?p=1001087"><span class="icon">​</span>Den Freetz "Not-Aus" Schalter</a>.
</p>
<p>
Wenn der Parameter <em>kernel_args</em> den Eintrag <tt>ds_off=y</tt> enthält, wird der Haupteil von Freetz nicht mehr gestartet (genauer wird /etc/init.d/rc.mod nicht aufgerufen).

Um den Parameter zu setzen muss man sich allerdings per FTP auf die Box verbinden, hat aber dann gute Chancen, die Box ohne Recover erfolgreich zu neu wiederbeleben.
</p>
<p>
So geht es:
</p>
<ul><li>PC eine "feste" IP aus dem Netz 192.168.178.0 geben, z.B. 192.168.178.12 255.255.255.0
</li><li>Direkt nach dem Einschalten des Routers per FTP auf die 192.168.178.1 (User/PW: adam2/adam2) verbinden (der FTP-Server steht nur wenige Sekunden nach dem Einstecken des Netzteils zur Verfügung, also eventuell ein paar mal versuchen (oder den Hinweis aus dem letzten Punkt ausprobieren)
</li><li>Im FTP:
<pre class="wiki">quote SETENV kernel_args ds_off=y
quote REBOOT
</pre>(bereits vorhandene Einträge in den kernel_args gehen dadurch natürlich verloren&hellip;)
</li><li>Falls die Box auf die IP 192.168.178.1 nicht reagiert hilf in der Regel der Trick, ein unpassendes Recover einer anderen(!) Box zu starten, was zwar mit einer Fehlermeldung abbricht, aber zwei angenehme Nebeneffekte hat: Die Box wird (wenn der PC eine IP wie oben hat) im FTP-Modus auf die IP 192.168.178.1 gesetzt und bleibt im FTP-Modus, so dass das Abpassen des kurzen Momentes nach dem Starten entfällt.
</li></ul><p>
Jetzt sollte zumindest die AVM-Oberfläche wieder wie gewohnt zu erreichen sein. Man kann sich nun per Telnet auf die Box verbinden und die "fehlerhafte" Konfiguration eines Paketes zurücksetzen, indem man z.B. /var/tmp/flash/&lt;paket&gt;.diff löscht, von Hand "korrigiert" oder umbenennt. Wenn dann der Aufruf von <tt>/etc/init.d/rc.mod</tt> wieder ein "normal funktionierendes" Freetz startet, braucht man nur noch den <tt>ds_off=y</tt> Parameter zu entfernen, und alles sollte wieder gehen:
</p>
<pre class="wiki">. /usr/bin/kernel_args
ka_removeVariable ds_off
</pre><p>
Ergänzender Hinweis: Analog schaltet <tt>dbg_off=y</tt> das Abarbeiten der debug.cfg beim Starten ab.
</p>
</div>

      </div><ul class="tags"><li class="header">Tags</li><li><a href="/tags/faq" rel="tag">faq</a> </li></ul>

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/pygments/trac.css", "text/css");
    </script>
    </div>
  </body>
</html>
