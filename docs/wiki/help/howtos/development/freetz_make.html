<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      help/howtos/development/freetz_make – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="../../../TracGuide.html" />
        <link rel="alternate" href="freetz_make%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../development.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../../../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../../../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="https://www.google.com/search" method="get" onsubmit="; this.elements.namedItem('q').value = this.elements.namedItem('oq').value + ' site:freetz.github.io'">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="oq" size="18" value="" />
          <input type="hidden" name="q" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/login">Anmelden</a></li><li><a href="/prefs">Einstellungen</a></li><li><a href="../../../TracGuide.html">Hilfe/Anleitung</a></li><li><a href="/about">Über Trac</a></li><li><a href="/notification" title="Wiki Pages Change Notifications">My Notifications</a></li><li><a href="/register">Registrieren</a></li><li class="last"><a href="../../../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li><a href="/timeline">Journal</a></li><li><a href="/roadmap">Projektplan</a></li><li><a href="/browser">Quellen durchsehen</a></li><li><a href="/report">Tickets anzeigen</a></li><li><a href="/search">Suche</a></li><li><a href="/tags">Tags</a></li><li><a href="/downloads">Downloads</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="freetz_make.html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="/wiki/help/howtos/development/freetz_make.en" title="(not available)">English</a></li></ul></div><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="../../../help.html" title="Zeige help an">help</a><span class="pathentry sep">/</span><a class="pathentry" href="../../howtos.html" title="Zeige help/howtos an">howtos</a><span class="pathentry sep">/</span><a class="pathentry" href="../development.html" title="Zeige help/howtos/development an">development</a><span class="pathentry sep">/</span><a class="pathentry" href="freetz_make.html" title="Zeige help/howtos/development/freetz_make an">freetz_make</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Kontext-Navigation</h2>
        <ul>
          <li class="first"><a href="../development.html">Aufwärts</a></li><li><a href="../../../index.html">Startseite</a></li><li><a href="../../../TitleIndex.html">Inhaltsverzeichnis</a></li><li><a href="freetz_make%3Faction=history.html">Änderungshistorie</a></li><li class="last"><a href="/notification/help/howtos/development/freetz_make." title="Watch Page">Watch Page</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><p>
</p><div class="wiki-toc"><h4>Howtos: Entwicklung</h4><ol><li><a href="repack_fw.html#EntpackenundPackenvonFirmware-Images">Entpacken und Packen von Firmware-Images</a><ol><li><a href="repack_fw.html#ToolsundSyntax">Tools und Syntax</a></li><li><a href="repack_fw.html#Vorgehensweise">Vorgehensweise</a></li><li><a href="repack_fw.html#Verwendungvonfwmodimnofreetz-Modus">Verwendung von fwmod im "no freetz"-Modus</a></li></ol></li><li><a href="integrate_patches.html#PatchesinFreetzeinspielen">Patches in Freetz einspielen</a></li><li><a href="developer_information/package_development_start/example_3.html#Example3:NZBGet">Example 3: NZBGet</a><ol><li><a href="developer_information/package_development_start/example_3.html#Buildmanually">Build manually</a></li><li><a href="developer_information/package_development_start/example_3.html#AddpackagetoFreetz">Add package to Freetz</a></li><li><a href="developer_information/package_development_start/example_3.html#Createnewimagewithaddedpackage">Create new image with added package</a></li><li><a href="developer_information/package_development_start/example_3.html#Testing">Testing</a></li><li><a href="developer_information/package_development_start/example_3.html#PreparingNewPackageforPublicIntegrationtoFreetzTrunk">Preparing New Package for Public Integration to Freetz Trunk</a></li></ol></li><li><a href="developer_information/package_development_start/example_2.html#Example2:par2cmdline">Example 2: par2cmdline</a><ol><li><a href="developer_information/package_development_start/example_2.html#Buildmanually">Build manually</a></li><li><a href="developer_information/package_development_start/example_2.html#AddpackagetoFreetz">Add package to Freetz</a></li><li><a href="developer_information/package_development_start/example_2.html#Createnewimagewithaddedpackage">Create new image with added package</a></li><li><a href="developer_information/package_development_start/example_2.html#Testing">Testing</a></li><li><a href="developer_information/package_development_start/example_2.html#PreparingNewPackageforPublicIntegrationtoFreetzTrunk">Preparing New Package for Public Integration to Freetz Trunk</a></li></ol></li><li><a href="developer_information/package_development_start/example_1.html#Example1:Httptunnel">Example 1: Httptunnel</a><ol><li><a href="developer_information/package_development_start/example_1.html#Buildmanually">Build manually</a></li><li><a href="developer_information/package_development_start/example_1.html#AddpackagetoFreetz">Add package to Freetz</a></li><li><a href="developer_information/package_development_start/example_1.html#CallProceduresmakemenuconfigandmake">Call Procedures "make menuconfig" and "make"</a></li><li><a href="developer_information/package_development_start/example_1.html#Testing">Testing</a></li><li><a href="developer_information/package_development_start/example_1.html#PreparingNewPackageforPublicIntegrationtoFreetzTrunk">Preparing New Package for Public Integration to Freetz Trunk</a></li></ol></li><li><ol><li><a href="sign_image.html#SignierenvonFirmware">Signieren von Firmware</a></li><li><a href="sign_image.html#KonkreteAnwendunginFreetz">Konkrete Anwendung in Freetz</a></li></ol></li><li><a href="firmware_update_details.html#AblaufeinesFirmware-Updates">Ablauf eines Firmware-Updates</a></li><li><a href="compile_own_progs.html#EigeneProgrammekompilieren">Eigene Programme kompilieren</a></li><li><a href="bandwidth_svg.html#DynamischeBandbreitenanzeigeperSVG">Dynamische Bandbreitenanzeige per SVG</a><ol><li><a href="bandwidth_svg.html#AnleitungzurTest-Installation">Anleitung zur Test-Installation</a></li></ol></li><li><a href="make_room.html#PlatzsparenimDateisystemderFritzBox">Platz sparen im Dateisystem der FritzBox</a><ol><li><a href="make_room.html#VorwortundMotivation">Vorwort und Motivation</a></li><li><a href="make_room.html#Bestandsaufnahme:WosteckendiePlatzfresser">Bestandsaufnahme: Wo stecken die Platzfresser?</a></li><li><a href="make_room.html#WeitereSpartricks">Weitere Spartricks</a></li><li><a href="make_room.html#Schlußwort">Schlußwort</a></li></ol></li><li><a href="save_mtd_1.html#Flash-PartitionenimlaufendenBetriebsichern">Flash-Partitionen im laufenden Betrieb sichern</a><ol><li><a href="save_mtd_1.html#Motivation">Motivation</a></li><li><a href="save_mtd_1.html#Voraussetzungen">Voraussetzungen</a></li><li><a href="save_mtd_1.html#Lösungsweg">Lösungsweg</a></li><li><a href="save_mtd_1.html#WegesichschnelleinenÜberblickzuverschaffen">Wege, sich schnell einen Überblick zu verschaffen</a></li><li><a href="save_mtd_1.html#Zusammenfassung">Zusammenfassung</a></li></ol></li><li><a href="release_management.html#ReleaseManagement">Release Management</a><ol><li><a href="release_management.html#SubversionRepository">Subversion Repository</a></li><li><a href="release_management.html#Checklists">Checklists</a></li><li><a href="release_management.html#GIT">GIT</a></li><li><a href="release_management.html#Downloads">Downloads</a></li><li><a href="release_management.html#References">References</a></li></ol></li><li><a href="developer_information/package_development_start.html#Firststeps-Howtostartyourfirstfreetzpackage">First steps - How to start your first freetz package</a><ol><li><a href="developer_information/package_development_start.html#Info">Info</a></li><li><a href="developer_information/package_development_start.html#BuildEnvironment">Build Environment</a></li><li><a href="developer_information/package_development_start.html#FileStructure">File Structure</a></li><li><a href="developer_information/package_development_start.html#ExamplesBinaryPackage">Examples Binary Package</a></li><li><a href="developer_information/package_development_start.html#ConfigurationHandling">Configuration Handling</a></li><li><a href="developer_information/package_development_start.html#ExamplesWeb-Interface">Examples Web-Interface</a></li><li><a href="developer_information/package_development_start.html#Troubleshooting">Trouble shooting</a></li></ol></li><li><a href="make_kernel.html#Kernelkonfigurierenundkompilieren">Kernel konfigurieren und kompilieren</a></li><li><a href="menuconfig.html#Menükonfigurationpflegen">Menükonfiguration pflegen</a><ol><li><a href="menuconfig.html#Einstieg">Einstieg</a></li><li><a href="menuconfig.html#Beispiel-KonfigurationfüreinneuesPaket">Beispiel-Konfiguration für ein neues Paket</a></li><li><a href="menuconfig.html#Menuconfig-Warnungenbeheben">Menuconfig-Warnungen beheben</a></li><li><a href="menuconfig.html#ErklärungundAnwendungdererweitertenMK-Targets">Erklärung und Anwendung der erweiterten MK-Targets</a></li><li><a href="menuconfig.html#Syntax-FehlerinMK-Dateienfinden">Syntax-Fehler in MK-Dateien finden</a></li><li><a href="menuconfig.html#Syntax-HervorhebungfürMK-Dateien">Syntax-Hervorhebung für MK-Dateien</a></li></ol></li><li><a href="adam2.html#ADAM2-Bootloader">ADAM2-Bootloader</a><ol><li><a href="adam2.html#Bootloader-Backupanlegen">Bootloader-Backup anlegen</a></li><li><a href="adam2.html#Bootloaderüberschreiben">Bootloader überschreiben</a></li><li><a href="adam2.html#Bootloader-Befehle">Bootloader-Befehle</a></li><li><a href="adam2.html#Bootloader-Quelltext">Bootloader-Quelltext</a></li><li><a href="adam2.html#AufbaudesBootloaders">Aufbau des Bootloaders</a></li><li><a href="adam2.html#BootloaderundFreetz">Bootloader und Freetz</a></li></ol></li><li><a href="urlader_flags.html#EinstellungenspeichernimUrlader-Environment">Einstellungen speichern im Urlader-Environment</a><ol><li><a href="urlader_flags.html#VorwortundMotivation">Vorwort und Motivation</a></li><li><a href="urlader_flags.html#Lösungsmöglichkeiten">Lösungsmöglichkeiten</a></li><li><a href="urlader_flags.html#BootloaderEnvironment">Bootloader Environment</a></li><li><a href="urlader_flags.html#Variablekernel_args">Variable "kernel_args"</a></li><li><a href="urlader_flags.html#Kernel_Args-API">Kernel_Args-API</a></li><li><a href="urlader_flags.html#MöglicheAnwendungsfälle">Mögliche Anwendungsfälle</a></li></ol></li><li><a href="make_busybox.html#Busyboxkonfigurierenundkompilieren">Busybox konfigurieren und kompilieren</a></li><li><a href="package_creation.html#WiebaueicheineigenesPaketfürFreetz">Wie baue ich ein eigenes Paket für Freetz?</a></li><li><a href="analyse_image_names.html#Firmware-Image-Namenanalysierenundinterpretieren">Firmware-Image-Namen analysieren und interpretieren</a><ol><li><a href="analyse_image_names.html#Einleitung">Einleitung</a></li><li><a href="analyse_image_names.html#Skript-Code">Skript-Code</a></li><li><a href="analyse_image_names.html#DatenimRohformat">Daten im Rohformat</a></li><li><a href="analyse_image_names.html#AusgabegrundlegenderInformationen">Ausgabe grundlegender Informationen</a></li><li><a href="analyse_image_names.html#AusgabeerweiterterInformationen">Ausgabe erweiterter Informationen</a></li></ol></li><li><ol><li><a href="developer_information/package_development_start/webinterface_example_1.html#Web-interfaceHTTPTunnel">Web-interface HTTPTunnel</a></li></ol></li><li><a href="developer_information.html#DeveloperInformation">Developer Information</a></li><li><a href="install_addon.html#AddonPaketinstallieren">Addon Paket installieren</a></li><li><a href="developer_information/package_development_dynamic.html#PaketverwaltungfürFreetz">Paketverwaltung für Freetz</a><ol><li><a href="developer_information/package_development_dynamic.html#ErweiterungdesDateisystems">Erweiterung des Dateisystems</a></li><li><a href="developer_information/package_development_dynamic.html#Paketverwaltung">Paketverwaltung</a></li><li><a href="developer_information/package_development_dynamic.html#Links">Links</a></li><li><a href="developer_information/package_development_dynamic.html#Kommentare">Kommentare</a></li></ol></li><li><a href="manipulation_detection.html#WiedieFritzBoxManipulationenerkennt">Wie die FritzBox Manipulationen erkennt</a><ol><li><a href="manipulation_detection.html#Ursachen">Ursachen</a></li><li><a href="manipulation_detection.html#Diagnose">Diagnose</a></li><li><a href="manipulation_detection.html#Lösungen">Lösungen</a></li><li><a href="manipulation_detection.html#SchlußwortundAusblick">Schlußwort und Ausblick</a></li></ol></li><li><a href="developer_information/shell_coding_conventions.html#ShellCodingConventions">Shell Coding Conventions</a><ol><li><a href="developer_information/shell_coding_conventions.html#ShellLanguage">Shell Language</a></li><li><a href="developer_information/shell_coding_conventions.html#BasicFormat">Basic Format</a></li><li><a href="developer_information/shell_coding_conventions.html#IfForandWhile">If, For, and While</a></li><li><a href="developer_information/shell_coding_conventions.html#TestBuilt-in">Test Built-in</a></li><li><a href="developer_information/shell_coding_conventions.html#Single-lineconditionalstatements">Single-line conditional statements</a></li><li><a href="developer_information/shell_coding_conventions.html#InfiniteLoops">Infinite Loops</a></li><li><a href="developer_information/shell_coding_conventions.html#ExitStatusandIfWhileStatements">Exit Status and If/While Statements</a></li><li><a href="developer_information/shell_coding_conventions.html#VariableReferences">Variable References</a></li><li><a href="developer_information/shell_coding_conventions.html#VariableNaming">Variable Naming</a></li><li><a href="developer_information/shell_coding_conventions.html#Quoting">Quoting</a></li><li><a href="developer_information/shell_coding_conventions.html#VariableAssignments">Variable Assignments</a></li><li><a href="developer_information/shell_coding_conventions.html#TestingforNon-EmptyStrings">Testing for (Non-)Empty Strings</a></li><li><a href="developer_information/shell_coding_conventions.html#Commenting">Commenting</a></li><li><a href="developer_information/shell_coding_conventions.html#Pathnames">Pathnames</a></li><li><a href="developer_information/shell_coding_conventions.html#InterpreterMagic">Interpreter Magic</a></li></ol></li><li><a href="developer_information/package_development.html#PackageDevelopment">Package Development</a><ol><li><a href="developer_information/package_development.html#PersistentPackageSettings">Persistent Package Settings</a></li></ol></li><li><a href="create_gui.html#ErstelleneinerGUIfürPaketeinFreetz">Erstellen einer GUI für Pakete in Freetz</a><ol><li><a href="create_gui.html#Motivation">Motivation</a></li><li><a href="create_gui.html#Grundlagen">Grundlagen</a></li><li><a href="create_gui.html#WiefunktioniertdasmitderGUI">Wie funktioniert das mit der GUI?</a></li></ol></li><li><a href="flash.html#FlashPartitionierung">Flash Partitionierung</a><ol><li><a href="flash.html#HiddenSquashFS">Hidden SquashFS</a></li><li><a href="flash.html#ContiguousSquashFS">Contiguous SquashFS</a></li><li><a href="flash.html#HiddenRoot">Hidden Root</a></li><li><a href="flash.html#NANDRoot">NAND Root</a></li><li><a href="flash.html#Dateisystem">Dateisystem</a></li><li><a href="flash.html#Kernel">Kernel</a></li><li><a href="flash.html#Weblinks">Weblinks</a></li></ol></li><li><a href="developer_information/post_commit_hook.html#TracHooks">Trac Hooks</a><ol><li><a href="developer_information/post_commit_hook.html#trac-post-commit-hook">trac-post-commit-hook</a></li><li><a href="developer_information/post_commit_hook.html#trac-post-revprop-change-hook">trac-post-revprop-change-hook</a></li></ol></li><li><a href="developer_information/package_development_advanced.html#PackageDeveloping-AdvancedTopics">Package Developing - Advanced Topics</a><ol><li><a href="developer_information/package_development_advanced.html#Addingconditionalpatches">Adding conditional patches</a></li><li><a href="developer_information/package_development_advanced.html#Addingmulti-binarypackages">Adding multi-binary packages</a></li></ol></li><li><a href="integrate_own_files.html#EigeneDateienindieFirmwareintegrieren">Eigene Dateien in die Firmware integrieren</a><ol><li><a href="integrate_own_files.html#FesteIntegrationüberdasFreetzImage">Feste Integration über das Freetz Image</a></li><li><a href="integrate_own_files.html#ErzeugenderDateienausderdebug.cfg">Erzeugen der Dateien aus der debug.cfg</a></li><li><a href="integrate_own_files.html#NachladenvomWebserver">Nachladen vom Webserver</a></li><li><a href="integrate_own_files.html#NachladenvomUSB-Stick">Nachladen vom USB-Stick</a></li><li><a href="integrate_own_files.html#WebDAVSharemounten">WebDAV Share mounten</a></li><li><a href="integrate_own_files.html#NFS-Sharemounten">NFS-Share mounten</a></li></ol></li><li class="active"><a href="freetz_make.html#FreetzBuild-Prozeß">Freetz Build-Prozeß</a><ol><li class="active"><a href="freetz_make.html#VorwortundMotivation">Vorwort und Motivation</a></li><li class="active"><a href="freetz_make.html#Grundsätzliches">Grundsätzliches</a></li></ol></li><li><a href="save_mtd_2.html#Flash-PartitionenvonaußenmitFTPsichern">Flash-Partitionen von außen mit FTP sichern</a><ol><li><a href="save_mtd_2.html#Motivation">Motivation</a></li><li><a href="save_mtd_2.html#Voraussetzungen">Voraussetzungen</a></li><li><a href="save_mtd_2.html#AllgemeineInformationenzurDatensicherung">Allgemeine Informationen zur Datensicherung</a></li><li><a href="save_mtd_2.html#SicherungmitLinux-Standard-FTPftp">Sicherung mit Linux-Standard-FTP (ftp)</a></li><li><a href="save_mtd_2.html#SicherungmitLinux-NcFTPncftpget">Sicherung mit Linux-NcFTP (ncftpget)</a></li><li><a href="save_mtd_2.html#SicherungmitCygwin-NcFTPncftpget">Sicherung mit Cygwin-NcFTP (ncftpget)</a></li><li><a href="save_mtd_2.html#UploadsviaFTP">Uploads via FTP</a></li></ol></li><li><a href="developer_information/webif/libmodcgi.html#libmodcgi.sh">libmodcgi.sh</a><ol><li><a href="developer_information/webif/libmodcgi.html#cgi">cgi</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_begin">cgi_begin</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_end">cgi_end</a></li><li><a href="developer_information/webif/libmodcgi.html#sec_begin">sec_begin</a></li><li><a href="developer_information/webif/libmodcgi.html#sec_end">sec_end</a></li><li><a href="developer_information/webif/libmodcgi.html#html">html</a></li><li><a href="developer_information/webif/libmodcgi.html#checkselect">check, select</a></li><li><a href="developer_information/webif/libmodcgi.html#href">href</a></li><li><a href="developer_information/webif/libmodcgi.html#back_button">back_button</a></li><li><a href="developer_information/webif/libmodcgi.html#sec_level">sec_level</a></li><li><a href="developer_information/webif/libmodcgi.html#stat_bar">stat_bar</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_param">cgi_param</a></li><li><a href="developer_information/webif/libmodcgi.html#cgi_errorprint_error">cgi_error, print_error</a></li><li><a href="developer_information/webif/libmodcgi.html#path_info">path_info</a></li><li><a href="developer_information/webif/libmodcgi.html#valid">valid</a></li></ol></li><li><a href="create_cross-compiler_toolchain.html#Cross-CompilerToolchainerstellen">Cross-Compiler / Toolchain erstellen</a></li><li><a href="create_cross-compiler_toolchain.html#EigeneDownload-Toolchainerstellen">Eigene Download-Toolchain erstellen</a></li><li><a href="create_cross-compiler_toolchain.html#TargetNative-Compiler-Toolchainerstellen">Target/Native-Compiler-Toolchain erstellen</a><ol><li><a href="create_cross-compiler_toolchain.html#Usingthedev-toolspackagetoinstallcompilerandtools">Using the dev-tools package to install compiler and tools</a></li></ol></li></ol></div><p>
</p>
<h1 id="FreetzBuild-Prozeß">Freetz Build-Prozeß</h1>
<h2 id="VorwortundMotivation">Vorwort und Motivation</h2>
<p>
In den <a class="wiki" href="../../howtos.html">HowTos</a> gibt es einige wichtige Informationen darüber, was man mit <em>Make</em>-Targets wie <a class="wiki" href="../common/install/menuconfig.html">menuconfig</a>, <em>toolchain</em>, <em>precompiled</em>, <em>recover</em> usw. erreichen kann beim Bau einer <em>Freetz</em>-Firmware. Trotzdem gibt es im Forum regelmäßig eine Menge Fragen zum Build-Prozess - meistens, wenn der Prozess nicht durchläuft und der betreffende Benutzer nicht weiß, woran das liegt. Der Grund ist meistens, dass es sich um einen unerfahrenen Benutzer handelt, der mit <a class="ext-link" href="http://www.gnu.org/software/make/"><span class="icon">​</span>GNU make</a> keine Erfahrung hat, weil er erstens nicht C/C++-Programmierer ist und/oder zweitens bereits die Linux-Kommandozeile per se ein Buch mit sieben Siegeln für ihn ist. Zumindest Ersteres trifft auf mich auch zu, und deshalb habe ich mich mal oberflächlich eingelesen, um das <tt>Makefile</tt> von <em>Freetz</em> besser (oder überhaupt) zu verstehen. Das Ergebnis meiner Arbeit dokumentiere ich hier.
</p>
<p>
Die Probleme der Hilfesuchenden im Forum hören nämlich nicht damit auf, dass der Build manchmal hängen bleibt. Da viele Fragen aus Sicht der Cracks "dumm" klingen, sich häufig wiederholen - nicht jeder ist geschickt darin, die Suchfunktion des Forums oder Google zu benutzen, manche sind auch einfach zu faul - und somit manchen Profis lästig sind, fallen die Antworten entsprechend kurz aus, was wiederum zu Rückfragen und mehr "Müll" im Forum führt. Wenn dann der Hilfesuchende die Ursache des Problems beseitigt hat (Linux-Package nachinstalliert, richtige Option in <tt>make menuconfig</tt> an-/abgewählt, Patch installiert), bekommt er oftmals den Build trotzdem nicht mehr ans Laufen, weil die Abhängigkeiten nicht hunderprozentig sauber gepflegt sind und er zunächst nochmal ein <em>xy-clean</em> und/oder <em>xy-precompiled</em> aufrufen müsste, ihm das aber keiner gesagt hat, weil es auch schwer vorherzusehen ist.
</p>
<p>
Der Traum vom perfekten <tt>Makefile</tt>, das bei jeder Dateiänderung genau das tut, was minimal zu tun wäre, um das aktuelle Target zu bauen, ist grundsätzlich erreichbar, bei uns aber nicht realisiert. Obwohl man sagen muss, daß der Freetz <em>Make</em>-Prozess schon relativ gut ist - nur eben nicht idiotensicher. Das war wohl auch nicht das Ziel, denn ein "Idiot" sollte keine Firmware für seinen DSL-Router bauen wollen. Andererseits ist es aber auch gut für unsere Gemeinschaft, wenn neuen Mitgliedern die Lernkurve etwas angenehmer gestaltet wird. Es ergibt keinen Sinn, dass jeder das Rad neu erfindet und sich alles selbst erarbeitet, nur weil andere das früher hatten tun müssen.
</p>
<h2 id="Grundsätzliches">Grundsätzliches</h2>
<p>
Basis dieser Dokumentation ist <strong>Freetz-1.1.4</strong>. Da es inzwischen neuere Freetz-Versionen gibt wird an einige Stellen auf Abweichungen hingewiesen.
</p>
<h3 id="Wastutmake">Was tut make?</h3>
<p>
Das würde hier wirklich den Rahmen sprengen, daher nur ein paar Links. Sich einzulesen, lohnt sich - Bildung ist nie umsonst:
</p>
<ul><li><a class="ext-link" href="http://de.wikipedia.org/wiki/Make"><span class="icon">​</span>Wikipedia-Artikel zu Make</a>
</li><li><a class="ext-link" href="http://www.ijon.de/comp/tutorials/makefile.html"><span class="icon">​</span>Eine Einführung in Makefiles</a> (deutsch, kurz und knackig, leicht zu verstehen)
</li><li><a class="ext-link" href="http://members.tip.net.au/~millerp/rmch/recu-make-cons-harm.html"><span class="icon">​</span>Recursive Make Considered Harmful</a> (hochspannend für Fortgeschrittene und Philosophen, PDF zum Herunterladen)
</li><li><a class="ext-link" href="http://de.wikipedia.org/wiki/GNU_autotools"><span class="icon">​</span>Wikipedia-Artikel zu Autoconf</a>  (nicht von <em>Freetz</em> selbst verwendet, aber von diversen Paketen)
</li></ul><h3 id="WorausbestehtFreetz">Woraus besteht Freetz?</h3>
<p>
Die modifizierte Firmware wird zusammengebaut aus mehreren Komponenten:
</p>
<ul><li><strong>Original-Firmware</strong>, bestehend aus Linux-Kernel und -Dateisystem. Sie bildet die Basis und das Grundgerüst für den Mod. Fälschlicherweise wird von vielen Einsteigern angenommen, die Original-Firmware werde weggeworfen und komplett durch etwas Selbstgebautes ersetzt. Dem ist nicht so. Viele wichtige Bestandteile werden übernommen, wie sie sind und um neue Funktionen ergänzt bzw. Einzelteile gezielt ausgetauscht. Wichtige Bestandteile der Original-FW sind
<ul><li><strong>Kernel</strong> (früher 2.4, aktuell 2.6). Für Daniels Mod konnte ein 2.4er Kernel übernommen werden, für Freetz muß er durch einen selbst gebauten 2.6er ersetzt werden. Nimmt man als Basis eine Original-FW mit 2.6er Kernel, kann man diesen übernehmen oder wahlweise ebenfalls ersetzen.
</li><li><strong>Dateisystem</strong> mit Standard-UNIX-Tools und AVM-spezifischen Werkzeugen (z.B. Web-Oberfläche). Wird (fast) unverändert übernommen mit einer wichtigen Ausnahme (siehe nächster Punkt).
</li><li><strong>Busybox</strong>: Sammlung der wichtigsten Kommandozeilenwerkzeuge, optimiert für Embedded-Systeme und enthalten in einer einzigen ausführbaren Datei. Die einzelnen Werkzeuge werden über symbolische Links auf die <a class="ext-link" href="http://de.wikipedia.org/wiki/Busybox"><span class="icon">​</span>Busybox</a> als scheinbar eigenständige Namen realisiert.
</li></ul></li></ul><p>
<strong>Freetz</strong> selbst präsentiert sich nach dem Auspacken des entsprechenden Archivs (z.B. <tt>freetz-1.1.4.tar.bz2</tt>) entsprechend der folgenden alphabetisch, nicht nach Wichtigkeit, sortierten Liste. (Die Unterverzeichnisse <tt>build</tt>, <tt>packages</tt>, <tt>source</tt> werden erst beim ersten <em>Make</em>-Lauf erzeugt.)
</p>
<ul><li><strong>Root-Verzeichnis</strong>: Hier befinden sich einige Konfigurationsdateien (später mehr dazu) sowie Change-Log, Firmwares und Read-Me. Desweiteren gibt es diverse Unterverzeichnisse:
<ul><li><strong><em>addon</em></strong>: Hierhin werden statische und (theoretisch) dynamische Packages (bereits kompiliert) entpackt, die mit ins Dateisystem der Firmware sollen und über den "Lieferumfang" des Standard-Mods hinausgehen.
</li><li><strong><em>build</em></strong>: Nach <em>build/original</em> wird das Original-Firmware-Image entpackt. Die drei Einzelbestandteile liegen dann wiederum in den Unterverzeichnissen <em>kernel</em> (Linux-Kernel), <em>filesystem</em> (Root-Dateisystem) und <em>firmware</em> (im Firmware-Image auf oberster Ebene enthaltene, zu dessen Installation notwendige Werkzeuge). Diese Bestandteile werden, wie bereits erwähnt, verwebt mit den generierten Bestandteilen (Kernel, Busybox, Packages, Sonstiges) und in einer parallelen Verzeichnisstruktur <em>build/modified</em> gespeichert. Von dort wiederum werden sie geholt, um letztendlich das Firmware-Image mit <em>Tar</em> zusammenzupacken.
</li><li><strong><em>busybox</em></strong>: Ablageort der neu gebauten Busybox für den Mod (ab Freetz-1.2 unter packages/target-mips(el)_uClbic-$(uClibc-Version)/busybox zu finden)
</li><li><strong><em>dl</em></strong>: <a class="wiki" href="../../../Download.html">Downloads</a> von Quell- und Binärpaketen für Toolchain und Mod. Die Webinterfaces zu den Paketen sind bis auf wenige Ausnahmen direkt im Mod enthalten, andere Dateien werden während des Builds aus dem Internet mittels <em>wget</em> nachgeladen.
</li><li><strong><em>favicon</em></strong>: Hier liegen (momentan) zwei kleine Sätze von Favicons, die man über <tt>make menuconfig</tt> auswählen kann, um das Web-Interface von Freetz mit hübschen kleinen Icons im Browser zu versehen (werden angezeigt in der Adreßzeile und bei den Favoriten).
</li><li><strong><em>howtos</em></strong>: ein paar deutsche und englische Kurzanleitungen zum Bauen des Mods bzw. eigener Erweiterungen.
</li><li><strong><em>kernel</em></strong>: Ablageort des neu gebauten Linux-Kernels und dessen Modulen für den Mod
</li><li><strong><em>make</em></strong>: Pro Package liegen hier die Include-Files und Konfigurationsdaten für das "große" <tt>Makefile</tt> im Wurzelverzeichnis, sowie die Startskripte, cgi-Dateien und sonstige zum Paket gehörigen Files. Die Konfigurationsdaten enthalten auch die Versionsnummern der nach <em>dl</em> herunterzuladenden Pakete.
</li><li><strong><em>packages</em></strong>: Hierhin werden die gebauten Packages abgelegt. In einem Unterverzeichnis pro Paket (wie unter <tt>make</tt>) liegen dann die entsprechenden Binär- und Konfigurationsdaten, welche ins Dateisystem eingewebt werden - zu bewundern unter <tt>build/modified</tt>, vgl. voriger Punkt. (ab Freetz-1.2 kommt unter packages/ eine weitere Verzeichnis-Ebene hinzu; diese trennt nach big oder little endian und uClibc-Version)
</li><li><strong><em>patches</em></strong>: Patches, welche nach dem Entpacken in die Sourcen eingearbeitet werden, je nachdem, welche Hardware und/oder Konfigurationseinstellung man verwendet.
</li><li><strong><em>root</em></strong>: Abbild des (Root-)Dateisystems der späteren Firmware. Hier liegen Webseiten, Startskripte, Konfigurationsdaten usw.. Sie werden beim Bauen der Firmware mit den Originaldaten und weiteren erzeugten Dateien (z.B. Kernel, Busybox) zu einem kompletten Image verwoben.
<ul><li>Freetz-1.2: Das Verzeichnis wurde nach make/mod/files/root verschoben, um eine Vereinheitlichung zu erreichen.
</li></ul></li><li><strong><em>source</em></strong>: Hierhin werden sämtliche Quelltexte für Toolchain, AVM-GPL-Paket, Tools, Packages, Busybox und Kernel entpackt, um anschließend die entsprechenden Build-Prozesse darüber laufen lassen zu können.
<ul><li>Freetz-1.2: Um eine bessere Trennung zu erreichen und unnötige <em>make dirclean</em>s zu vermeiden werden die Sourcen wie folgt aufgetrennt:
<ul><li><strong><em>host-tools</em></strong>: Hierin werden die Tools (busybox, mksquashfs, fakeroot usw.) für den Host gebaut.
</li><li><strong><em>kernel</em></strong>: Kernelsourcen
</li><li><strong><em>target-mips(el)_uClibc-$(uClibc-Version)</em></strong>: Hier werden die ausgewählten Pakete entpackt und gebaut.
</li><li><strong><em>toolchain-mips(el)_gcc-$(GCC-Version)_uClibc-$(uClibc-Version)</em></strong>: Toolchain Sourcen und Build. Enthält abhängig von der menuconfig-Auswahl binutils, ccache, gcc, gdb, uClibc, libtool.
</li></ul></li></ul></li><li><strong><em>toolchain</em></strong>: Nach dem Entpacken des Mods liegen hier die <em>Makefile</em>-Includes für das Bauen der Toolchains. Eine Toolchain i.a. ist eine Sammlung von Werkzeugen, welche notwendig sind, um Software zu bauen und enthalten z.B. Compiler und Linker. In unserem Fall gibt es zwei separate Toolchains für das Bauen des Kernels zum einen (<tt>gcc-3.4.6</tt>) und der übrigen Targets zum anderen (<tt>gcc-4.2.1-uClibc-0.9.28/0.9.29</tt>). In entsprechende Unterverzeichnisse werden die Toolchains dann auch übersetzt. Das Bauen der Toolchains ist optional, da es vorkompilierte Versionen zum <a class="wiki" href="../../../Download.html">Download</a> gibt. Abhängig von der Geschwindigkeit des Hosts kann der Toolchain Bau zwischen 20 - 60 Minuten dauern.
<ul><li>Freetz-1.2: Die GCC-Versionen wurden auf einen aktuellen Stand gebracht (gcc-4.4.6, gcc-4.5.3 und gcc-4.6.0).
</li></ul></li><li><strong><em>tools</em></strong>: Hier liegen weitere Werkzeuge bzw. deren <tt>Makefile</tt>-Includes, welche zum Bauen der Firmware-Images bzw. für <tt>make recover</tt> notwendig sind. Mit den Werkzeugen werden z.B. die Original-Firmwares entpackt (SquashFS-Dateisystem) und die späteren Mod-Images nach dem Einweben aller Bestandteile wieder zusammen geschnürt. Eine ältere tar-Version (15.1), die mit den in den Original-Firmwares enthaltenen Entpackern kompatible Firmware-Archive erzeugt, gehört neben anderen Helferlein ebenfalls dazu.
<ul><li>Freetz-1.2: Das tar-Paket wird nicht mehr als Tool gebaut. Es wird abhängig von der Aufgabe das Host-tar oder busybox-tar verwendet.
</li></ul></li></ul></li></ul><h3 id="AblaufdesBuild-Prozesses">Ablauf des Build-Prozesses</h3>
<p>
Es dürfte allgemein bekannt sein, daß die drei wichtigsten Make-Targets - in dieser Reihenfolge aufzurufen - lauten:
</p>
<ul><li><tt>make menuconfig</tt> - interaktiv Pakete zusammenstellen, zusätzliche Bibliotheken auswählen, Konfiguration speichern
</li><li><tt>make</tt> - Tools bauen, Toolchains bauen (sofern kein externer Compiler ausgewählt wurde), danach Bibliotheken, Linux-Kernel und Packages bauen, abschließen Firmware bauen.
</li></ul><p>
Daneben gibt es eine beträchtliche Anzahl weiterer <a class="wiki" href="../../../FAQ.html#Wasbedeutendieeinzelnenmake-targetsz.B.dircleandistcleanconfig-clean-depsetc.">Make-Targets</a>, die teilweise nicht direkt im Makefile sichtbar sind, sondern durch automatisierte Ersetzungsvorgänge erzeugt werden. Das hat den Vorteil, daß es z.B. pro Package jeweils die gleichen Sub-Targets gibt und man somit immer die Möglichkeit hat, durch einen <em>Make</em>-Aufruf direkt Einfluß auf einzelne Pakete zu nehmen (z.B. aufräumen, nochmal neu übersetzen). Wenn also <tt>make precompiled</tt> beispielsweise im Paket <a class="wiki" href="../../../packages/mc.html">mc</a> hängen geblieben ist, weil ein zum Bauen notwendiges Linux-Paket in unserer Distribution gefehlt hat, das wir erst noch per Paketmanager installieren mussten, kann es sein, dass ein erneuter Aufruf des globalen <em>precompiled</em> anschließend trotzdem nicht durchläuft, weil es Inkonsistenzen im Package-Build gibt. Da hilft dann meistens eine Sequenz wie <tt>make &lt;Paket&gt;-clean</tt>, <tt>make &lt;Paket&gt;-precompiled</tt>, also z.B. <em>mc-clean</em> und <em>mc-precompiled</em>. Wie die Pakete heißen, sieht man an den Namen der Unterverzeichnisse im Verzeichnis <tt>make</tt>.
</p>
<h3 id="Include-Kette">Include-Kette</h3>
<p>
Es gibt generell zwei Arten, <em>Make</em> für hierarchisch strukturierte Builds zu benutzen. Die eine, althergebrachte, geht von einem <tt>Makefile</tt> im Hauptverzeichnis und jeweils einem weiteren <tt>Makefile</tt> pro Unterverzeichnis aus. Daß dies keine gute Idee ist, wird in <a class="ext-link" href="http://members.tip.net.au/~millerp/rmch/recu-make-cons-harm.html"><span class="icon">​</span>Recursive Make Considered Harmful</a> überzeugend dargelegt. Die gute Nachricht ist: Freetz verwendet die zweite Methode, und zwar Include-Dateien in den Unterverzeichnissen. D.h., das <tt>Makefile</tt> lädt die für das aktuelle Target notwendigen Includes dynamisch nach und erzeugt so ein einziges, großes, virtuelles <tt>Makefile</tt>, welches dann abgearbeitet wird. Das ist schön, führt aber dazu, daß wir im <tt>Makefile</tt> sehen, wie Dinge aufgerufen und abgearbeitet werden, deren Herkunft nicht ganz so leicht festzustellen ist, wenn man sich nicht im Detail die Verzeichnisstruktur ansieht. Ich versuche hier, das ein wenig transparenter zu machen.
</p>
<ul><li>Zunächst inkludiert das <tt>Makefile</tt> die Konfigurationsdatei <tt>.config</tt> im Hauptverzeichnis. Sie wiederum enthält die in <tt>make menuconfig</tt> festgelegten Optionen für die Zusammenstellung des Firmware-Images. Damit wird schon klar, weshalb wir <tt>make menuconfig</tt> immer als erstes aufrufen sollten. Die Datei existiert übrigens direkt nach dem Auspacken des Mod-Archivs auch noch gar nicht. Ausnahme für den Include: Sofern wir nur Targets aus der Gruppe <em>menuconfig, config, oldconfig, defconfig, tools</em> bauen wollen, erfolgt kein Include an dieser Stelle, da diese Targets ihn nicht benötigen.
</li><li>Etwas später erfolgt das Inkludieren von <tt>tools/make/Makefile.in</tt> sowie <tt>tools/make/*.mk</tt>, was dazu führt, daß die einzelnen Tool-Targets (<em>find-squashfs, lzma, squashfs, tichksum, makedevs, fakeroot</em>) der Variablen <em>TOOLS</em> hinzugefügt werden. Anschließend wird pro Tool-Target noch eine Liste von Sub-Targets erzeugt:
<ul><li><strong><em>&lt;tool&gt;</em></strong>: Baut das Tool.
</li><li><strong><em>&lt;tool&gt;-source</em></strong>: Packt die Quelldateien aus, damit anschließend das Tool gebaut werden kann.
</li><li><strong><em>&lt;tool&gt;-clean</em></strong>: Ruft im Tool-Unterverzeichnis das eigene <tt>Makefile</tt> des Tools mit <tt>make clean</tt> auf. Das Target <em>clean</em> löscht meistens sämtliche generierten Dateien und Verzeichnisse, um anschließend sauber neu aufsetzen zu können.
</li><li><strong><em>&lt;tool&gt;-dirclean</em></strong>: Löscht das gesamte Tool-Unterverzeichnis. Das ist praktisch, wenn man eine neuere Version auspacken und die alte vorher komplett wegräumen möchte.
</li><li><strong><em>&lt;tool&gt;-distclean</em></strong>: Löscht im Tool-Unterverzeichnis das Distributions-Verzeichnis, in dem die gebauten Dateien installationsfertig liegen.
</li></ul></li><li>Jetzt ist  <tt>.config.cmd</tt> dran. Dadurch werden rekursiv Konfigurations-Schalter diverser Pakete eingelesen, die später dem Build zur Verfügung stehen.
</li><li>Richtig rund geht es jetzt, denn include <tt>make/Makefile.in</tt>, <tt>make/*/Makefile.in</tt>, <tt>toolchain/make/Makefile.in</tt> und die entsprechenden <strong><em>*.mk</em></strong>-Dateien sorgen für noch mehr Informationen im virtuellen <tt>Makefile</tt>. Anschließend haben wir, analog zu den Tools oben, folgende Targets zur Verfügung, die sich in die Gruppen <em>TARGETS, PACKAGES, LIBS, TOOLCHAIN</em> aufteilen:
<ul><li><strong><em>&lt;target&gt;-precompiled</em></strong>: Baut ein Target, das nicht zu einem Package, zur Gruppe der Bibliothekten-Targets oder zur Toolchain gehört. Darunter fallen z.B. der Linux-Kernel, der CGI-Mod (Web-Oberfläche von Freetz), die Busybox, das CGI-Tool Haserl (momentan kein Package), iptables sowie die AVM-GPL-Quellen.
<ul><li>Freetz-1.2: Zu den Targets zählen nur noch der Kernel sowie die Busybox.
</li></ul></li><li><strong><em>&lt;target&gt;-source</em></strong>: Packt die Quelldateien aus, damit anschließend das Target gebaut werden kann.
</li><li><strong><em>&lt;target&gt;-clean</em></strong>: Ruft im Target-Unterverzeichnis das eigene <tt>Makefile</tt> des Targets mit <tt>make clean</tt> auf. Das Target <em>clean</em> löscht meistens sämtliche generierten Dateien und Verzeichnisse, um anschließend sauber neu aufsetzen zu können.
</li><li><strong><em>&lt;target&gt;-dirclean</em></strong>: Löscht das gesamte Target-Unterverzeichnis. Das ist praktisch, wenn man eine neuere Version auspacken und die alte vorher komplett wegräumen möchte.
</li><li><strong><em>&lt;package&gt;-precompiled</em></strong>: Baut ein Package.
</li><li><strong><em>&lt;package&gt;-source</em></strong>: Packt die Quelldateien aus, damit anschließend das Package gebaut werden kann.
</li><li><strong><em>&lt;package&gt;-clean</em></strong>: Ruft im Package-Unterverzeichnis das eigene <tt>Makefile</tt> des Packages mit <tt>make clean</tt> auf. Das Target <em>clean</em> löscht meistens sämtliche generierten Dateien und Verzeichnisse, um anschließend sauber neu aufsetzen zu können.
</li><li><strong><em>&lt;package&gt;-dirclean</em></strong>: Löscht das gesamte Package-Unterverzeichnis. Das ist praktisch, wenn man eine neuere Version auspacken und die alte vorher komplett wegräumen möchte.
</li><li><strong><em>&lt;package&gt;-list</em></strong>: Fügt das Package entweder der Liste der statischen oder der dynamischen Pakete hinzu.
</li><li><strong><em>&lt;lib&gt;-precompiled</em></strong>: Baut eine Bibliothek, z.B. ncurses, libgcrypt, openSSL.
</li><li><strong><em>&lt;lib&gt;-source</em></strong>: Packt die Quelldateien aus, damit anschließend die Bibliothek gebaut werden kann.
</li><li><strong><em>&lt;lib&gt;-clean</em></strong>: Ruft im Bibliotheks-Unterverzeichnis das eigene <tt>Makefile</tt> der Bibliothek mit <tt>make clean</tt> auf. Das Target <em>clean</em> löscht meistens sämtliche generierten Dateien und Verzeichnisse, um anschließend sauber neu aufsetzen zu können.
</li><li><strong><em>&lt;lib&gt;-dirclean</em></strong>: Löscht das gesamte Bibliotheks-Unterverzeichnis. Das ist praktisch, wenn man eine neuere Version auspacken und die alte vorher komplett wegräumen möchte.
</li><li><strong><em>&lt;toolchain&gt;</em></strong>: Baut die Toolchains (Kernel- und Target-Toolchain).
</li><li><strong><em>&lt;toolchain&gt;-source</em></strong>: Packt die Quelldateien aus, damit anschließend die Toolchain gebaut werden kann.
</li><li><strong><em>&lt;toolchain&gt;-clean</em></strong>: Ruft im Toolchain-Unterverzeichnis das eigene <tt>Makefile</tt> der Toolchain mit <tt>make clean</tt> auf. Das Target <em>clean</em> löscht meistens sämtliche generierten Dateien und Verzeichnisse, um anschließend sauber neu aufsetzen zu können.
</li><li><strong><em>&lt;toolchain&gt;-dirclean</em></strong>: Löscht das gesamte Toolchain-Unterverzeichnis. Das ist praktisch, wenn man eine neuere Version auspacken und die alte vorher komplett wegräumen möchte.
</li><li><strong><em>&lt;toolchain&gt;-distclean</em></strong>: Löscht im Toolchain-Unterverzeichnis das Distributions-Verzeichnis.
</li></ul></li><li>Im vorigen Schritt kamen noch zwei weitere Targets hinzu, die es ermöglichen, zwei zentrale Teile der Firmware noch individueller zu gestalten:
<ul><li><strong><em>kernel-menuconfig</em></strong>: Auch der Linux-Kernel hat eine hübsche Konfigurationsoberfläche, in der man allerhand einstellen kann. Ich halte es persönlich für wenig empfehlenswert, hier etwas zu ändern - es sei denn, man kennt sich wirklich gut damit aus. Es wird sehr schwierig, im Forum Hilfe zu finden, wenn man einen anders konfigurierten Kernel hat als der Rest der Welt.
</li><li><strong><em>busybox-menuconfig</em></strong>: Auch die Busybox kann man an diversen Stellen um Features ergänzen auf Kosten ihrer Größe. Die Besitzer der 8-MB-Boxen (z.B. 7170) haben in der Regel noch genug Platz, um hier das eine oder andere Feature hinzuzufügen. Hier empfehle ich, nichts wegzulassen, was standardmäßig enthalten ist, damit auch wieder die Vergleichbarkeit bei Diskussionen im Forum da ist. Es bringt nichts, das <em>Gunzip</em>-Feature in <em>Tar</em> zu deaktivieren und hinterher dann im Forum zu fragen, weshalb ein <em>Gzip</em>-Archiv nicht entpackt werden konnte. Hingegen stört es wenig, wenn man zusätzlich <em>Bunzip2</em> aktiviert, weil es ja nur ein Zusatz ohne Seiteneffekte (nach menschlichem Ermessen) ist.
</li></ul></li></ul><h3 id="SonstigeMake-Targets">Sonstige Make-Targets</h3>
<p>
Direkt im Top-Level-<tt>Makefile</tt>, also nicht inkludiert, sind weitere Targets enthalten.
</p>
<ul><li>Teilweise handelt es sich um <strong>Hilfs-Targets</strong>, welche man selten manuell aufrufen wird, weil sie hauptsächlich zur Verwendung seitens übergeordneter Targets gedacht sind. Beispiele hierfür sind <em>config, oldconfig, defconfig</em>.
</li><li>Desweiteren gibt es das Utility-Target <strong><em>recover</em></strong>, mit welchem man eine zerschossene Box wiederbeleben kann (Details würden den Rahmen des Artikels sprengen).
</li><li>Dann gibt es noch <strong>Sammel-Targets</strong> wie <em>sources, precompiled, libs, packages-precompiled</em>, welche eine ganze Gruppe ähnlich lautender oder dem Zweck nach verwandter Sub-Targets aufrufen.
</li><li>Wenn man nur eine Firmware zusammenbauen möchte und alle dafür notwendigen Vorarbeiten (Toolchains bauen, <tt>make precompiled</tt>) bereits erledigt sind, kann man das Target <strong><em>firmware</em></strong> benutzen. Es baut bei Bedarf noch die Tools (nicht mit den Toolchains zu verwechseln) und macht sich dann ans Werk. Am Ende hat man ein Firmware-Image im images-Verzeichnis mit dem Namen <em>*.image</em>. Das Target wird implizit aufgerufen, wenn mann einfach <tt>make</tt> aufruft, also das Default-Target baut. Übrigens erledigt das Skript <tt>fwmod</tt> im Wurzelverzeichnis die ganze Arbeit des Firmware-Bauens. Es ist sicher interessant, sich dieses Skript mal im Detail anzusehen, wenn man wissen möchte, was da so alles passiert.
</li></ul><p>
So, ich hoffe, dieser Artikel bringt dem einen oder anderen Modder etwas. Diskussionen, Feedback, Korrekturen hierzu sind wie immer willkommen und können im zugehörigen <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=129115"><span class="icon">​</span>Forums-Thread</a> eingebracht werden.
</p>
<p>
<a class="ext-link" href="http://www.ip-phone-forum.de/member.php?u=117253"><span class="icon">​</span>Alexander Kriegisch (kriegaex)</a><br />
Überarbeitet von Oliver Metz
</p>
</div>
          
          <div class="trac-modifiedby">
            <span><a href="freetz_make%3Faction=diff&amp;version=4.html" title="Version 4 von oliver: typo">zuletzt geändert</a> <a class="timeline" href="/timeline?from=2011-06-01T08%3A29%3A18Z&amp;precision=second" title="Siehe Journal am 01.06.2011 08:29:18">vor 7 Jahren</a></span>
            <span class="trac-print">Zuletzt geändert am 01.06.2011 08:29:18</span>
          </div>
        
        
      </div>
      

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/pygments/trac.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>In anderen Formaten herunterladen:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="freetz_make%3Fformat=txt">Reiner Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Betrieben mit <a href="/about"><strong>Trac 1.0.1</strong></a><br />
        von <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right"><div class="field" align="right"><form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_donations"/><input type="hidden" name="business" value="spenden@freetz.org"/><input type="hidden" name="item_name" value="Freetz Entwickler-Team"/><input type="hidden" name="no_shipping" value="1"/><input type="hidden" name="return" value=""/><input type="hidden" name="cn" value="Name oder IPPF-Pseudonym"/><input type="hidden" name="currency_code" value="EUR"/><input type="hidden" name="tax" value="0"/><input type="hidden" name="lc" value="DE"/><input type="hidden" name="bn" value="PP-DonationsBF"/><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Zahlen Sie mit PayPal - schnell, kostenlos und sicher!"/><img alt="" border="0" src="/pixel.gif" width="1" height="1"/></form></div></p>
    </div>
  </body>
</html>