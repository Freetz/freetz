<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      FAQ – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="TracGuide.html" />
        <link rel="alternate" href="FAQ%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../wikicss.css" type="text/css" /><link rel="stylesheet" href="../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="https://www.google.com/search" method="get" onsubmit="; this.elements.namedItem('q').value = this.elements.namedItem('oq').value + ' site:freetz.github.io'">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="oq" size="18" value="" />
          <input type="hidden" name="q" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="/login">Anmelden</a></li><li><a href="/prefs">Einstellungen</a></li><li><a href="TracGuide.html">Hilfe/Anleitung</a></li><li><a href="/about">Über Trac</a></li><li><a href="/notification" title="Wiki Pages Change Notifications">My Notifications</a></li><li><a href="/register">Registrieren</a></li><li class="last"><a href="Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li><a href="/timeline">Journal</a></li><li><a href="/roadmap">Projektplan</a></li><li><a href="/browser">Quellen durchsehen</a></li><li><a href="/report">Tickets anzeigen</a></li><li><a href="/search">Suche</a></li><li><a href="/tags">Tags</a></li><li><a href="/downloads">Downloads</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="FAQ..html" title="displaying language (default)">German</a></li><li class=" last"><a class="" href="FAQ.en.html" title="">English</a></li></ul></div><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="FAQ.html" title="Zeige FAQ an">FAQ</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Kontext-Navigation</h2>
        <ul>
          <li class="first"><a href="WikiStart.html">Startseite</a></li><li><a href="TitleIndex.html">Inhaltsverzeichnis</a></li><li><a href="FAQ%3Faction=history.html">Änderungshistorie</a></li><li class="last"><a href="/notification/FAQ." title="Watch Page">Watch Page</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><h1 id="Freetz-FAQ">Freetz-FAQ</h1>
<p>
Hier werden häufig gestellte Fragen (engl. <a class="wiki" href="FAQ.html">FAQ</a> = frequently asked questions) beantwortet. Diese Seite befindet sich noch im Aufbau.
</p>
<p>
</p><div class="wiki-toc"><h4>Inhaltsverzeichnis</h4><ol><li><a href="FAQ.html#ProduktnameundHistorisches">Produktname und Historisches</a><ol><li><a href="FAQ.html#WasistFreetz">Was ist Freetz?</a></li><li><a href="FAQ.html#WoherkommtderNameFreetz">Woher kommt der Name Freetz?</a></li><li><a href="FAQ.html#WiewirdFreetzausgesprochen">Wie wird Freetz ausgesprochen?</a></li><li><a href="FAQ.html#WieentstandFreetz">Wie entstand Freetz?</a></li><li><a href="FAQ.html#WozuüberhaupteinneuerNamewodochDS-Modinzwischensobekanntist">Wozu überhaupt ein neuer Name, wo doch DS-Mod inzwischen so bekannt ist?</a></li></ol></li><li><a href="FAQ.html#Motivation">Motivation</a><ol><li><a href="FAQ.html#WarumFirmwaremodifizieren">Warum Firmware modifizieren?</a></li></ol></li><li><a href="FAQ.html#Verbreitung">Verbreitung</a><ol><li><a href="FAQ.html#WarumwerdenkeinefertigenmodifiziertenImagesangeboten">Warum werden keine fertigen modifizierten Images angeboten?</a></li><li><a href="FAQ.html#WokannFREETZheruntergeladenwerden">Wo kann FREETZ heruntergeladen werden?</a></li><li><a href="FAQ.html#WelcheBoxenundwelcheFirmwareswerdendurchFreetzunterstützt:">Welche Boxen und welche Firmwares werden durch Freetz unterstützt:</a></li></ol></li><li><a href="FAQ.html#Entwicklung">Entwicklung</a><ol><li><a href="FAQ.html#WannkommtVersionxy">Wann kommt Version xy?</a></li><li><a href="FAQ.html#TrunkBranchesTags">Trunk, Branches, Tags?</a></li><li><a href="FAQ.html#WannistFeatureXYfertig">Wann ist Feature XY fertig?</a></li><li><a href="FAQ.html#FreetzgefälltmirundichmöchtedieWeiterentwicklungunterstützen.">Freetz gefällt mir und ich möchte die Weiterentwicklung unterstützen.</a></li></ol></li><li><a href="FAQ.html#Vorkonfigurationmenuconfig">Vorkonfiguration (menuconfig)</a><ol><li><a href="FAQ.html#WieerkennneichwelcheVarianteder7270ichbesitze">Wie erkennne ich welche Variante der 7270 ich besitze?</a></li><li><a href="FAQ.html#WelchePaketesolltemaninsFreetzImagesinnvollerweiseeinbauen">Welche Pakete sollte man ins Freetz Image sinnvollerweise einbauen?</a></li><li><a href="FAQ.html#Wasbedeutetbinaryonly">Was bedeutet "binary only"?</a></li><li><a href="FAQ.html#WasbedeutetEXPERIMENTALoderdieKategorieunstable">Was bedeutet "EXPERIMENTAL" oder die Kategorie "unstable"?</a></li><li><a href="FAQ.html#Funktioniertiptablesnatconntrack">Funktioniert iptables/nat/conntrack?</a></li><li><a href="FAQ.html#PacketAcceleratorAVMPA">Packet Accelerator (AVM PA)</a></li><li><a href="FAQ.html#WasbedeutetnotavailablenosourcesbyAVM">Was bedeutet "not available, no sources by AVM"?</a></li></ol></li><li><a href="FAQ.html#ErstellenvonFirmware-ImagesmakeBuild">Erstellen von Firmware-Images (make/Build)</a><ol><li><a href="FAQ.html#Wasbedeutendieeinzelnenmake-targetsz.B.dircleandistcleanconfig-clean-depsetc.">Was bedeuten die einzelnen make-targets (z.B. dirclean, distclean, &hellip;</a></li><li><a href="FAQ.html#BeimErstellentritteinFehleraufwasnun">Beim Erstellen tritt ein Fehler auf, was nun?</a></li><li><a href="FAQ.html#BeimErstellentrittimmernocheinFehlerauf">Beim Erstellen tritt immer noch ein Fehler auf&hellip;</a></li><li><a href="FAQ.html#IchkanndaserzeugteFreetzImagenichtfinden">Ich kann das erzeugte Freetz Image nicht finden?</a></li><li><a href="FAQ.html#Wofindeichdieseberühmte.config-Datei">Wo finde ich diese berühmte .config-Datei?</a></li><li><a href="FAQ.html#Wiebekommeichdie.config-DateiaufdenPC">Wie bekomme ich die .config-Datei auf den PC?</a></li></ol></li><li><a href="FAQ.html#FlashendesFirmware-Images">Flashen des Firmware-Images</a><ol><li><a href="FAQ.html#WieinstalliereichdasFreetz-Image">Wie installiere ich das Freetz-Image?</a></li><li><a href="FAQ.html#BeimFlashenmeldetdasAVM-WebinterfacedassdasImagekeinepassendeFirmwareenthält">Beim Flashen meldet das AVM-Webinterface, dass das Image keine passende &hellip;</a></li><li><a href="FAQ.html#Freetz-TrunkwurdeperAVMFirmware-UpdategeflashtnachdemNeustartscheintsichabernichtsgeändertzuhaben">Freetz-Trunk wurde per AVM Firmware-Update geflasht, nach dem Neustart &hellip;</a></li></ol></li><li><a href="FAQ.html#ProblemenachdemerfolgreichenFlashen">Probleme nach dem (erfolgreichen) Flashen</a><ol><li><a href="FAQ.html#WielautetdasStandard-PasswortfürFreetz">Wie lautet das Standard-Passwort für Freetz?</a></li><li><a href="FAQ.html#NachdemFlashenistdasAVM-Webinterfacenichtmehrerreichbar">Nach dem Flashen ist das AVM-Webinterface nicht mehr erreichbar</a></li><li><a href="FAQ.html#NachdemFlashenistdieBoxnichtmehrerreichbarundoderrebootetständig">Nach dem Flashen ist die Box nicht mehr erreichbar und/oder rebootet &hellip;</a></li><li><a href="FAQ.html#BeimAufrufdesOriginal-AVM-WebinterfacevonaussenbekommeichtrotzPortweiterleitungnureineweisseSeite">Beim Aufruf des Original-AVM-Webinterface von aussen bekomme ich trotz &hellip;</a></li><li><a href="FAQ.html#DasFreetz-WebinterfaceakzeptiertdieStandardkombinationfürBenutzerundPasswortadminfreetznicht">Das Freetz-Webinterface akzeptiert die Standardkombination für Benutzer &hellip;</a></li><li><a href="FAQ.html#KannmanPaketePatchesnachinstallierenohnedasFREETZ-Imageneuzuerstellen">Kann man Pakete/Patches nachinstallieren, ohne das FREETZ-Image neu zu &hellip;</a></li><li><a href="FAQ.html#NachdemFlashenistdasFreetz-Webinterfacenichtmehrerreichbar">Nach dem Flashen ist das Freetz-Webinterface nicht (mehr) erreichbar</a></li><li><a href="FAQ.html#DerdynamischeTeildesAVM-Webinterfaceverhältsichnichtwieerwartet">Der dynamische Teil des (AVM-)Webinterface verhält sich nicht wie erwartet</a></li></ol></li><li><a href="FAQ.html#Freetzaktualisieren">Freetz aktualisieren</a><ol><li><a href="FAQ.html#IchhabemomentaneineLaborversioninstalliert.KannichFreetzeinfachdarüberflashen">Ich habe momentan eine Laborversion installiert. Kann ich Freetz einfach &hellip;</a></li><li><a href="FAQ.html#IchhabeeinealteFreetz-FirmwareaufderBox">Ich habe eine alte Freetz-Firmware auf der Box</a></li></ol></li><li><a href="FAQ.html#Konfiguration">Konfiguration</a><ol><li><a href="FAQ.html#WolandendiediversenKonfigurationenaufderFritzbox">Wo landen die diversen Konfigurationen auf der Fritzbox?</a></li><li><a href="FAQ.html#KonfigurationinderaktuellenSicherheitsstufenichtverfügbar">Konfiguration in der aktuellen Sicherheitsstufe nicht verfügbar!</a></li><li><a href="FAQ.html#WiedeaktiviereichdasPasswortfürdieFreetz-Webseite">Wie deaktiviere ich das Passwort für die Freetz-Webseite?</a></li><li><a href="FAQ.html#WieändereichdasPasswortfürdieFreetz-Webseite">Wie ändere ich das Passwort für die Freetz-Webseite?</a></li><li><a href="FAQ.html#WieändereichdasPasswortfürdieFreetz-WebseitesofernichesvergessenundTelnetSSH-Zuganghabe">Wie ändere ich das Passwort für die Freetz-Webseite sofern ich es &hellip;</a></li><li><a href="FAQ.html#Wieändereichdasroot-Passwort">Wie ändere ich das root-Passwort?</a></li><li><a href="FAQ.html#Änderndesroot-PasswortesüberdieRudi-Shell">Ändern des root-Passwortes über die Rudi-Shell</a></li><li><a href="FAQ.html#WarumkannichmichnacheinerFreetz-WiederherstellungnichtmehramAVM-WebUIanmelden">Warum kann ich mich nach einer Freetz-Wiederherstellung nicht mehr am &hellip;</a></li></ol></li><li><a href="FAQ.html#ProblemeimBetrieb">Probleme im Betrieb</a><ol><li><a href="FAQ.html#varflashfreetztoobig">/var/flash/freetz too big</a></li><li><a href="FAQ.html#KeinFTP-ZugriffnachFreetzmöglich">Kein FTP-Zugriff nach Freetz möglich</a></li></ol></li><li><a href="FAQ.html#EntfernenvonFreetzundanderenModifikationen">Entfernen von Freetz und anderen Modifikationen</a></li><li><a href="FAQ.html#Sonstiges">Sonstiges</a><ol><li><a href="FAQ.html#ÄndernderArbeitsgruppevonfreetz-linux">Ändern der Arbeitsgruppe von "freetz-linux"</a></li><li><a href="FAQ.html#WiefindeichdieIPmeinerVirtuellenMaschine">Wie finde ich die IP meiner Virtuellen Maschine</a></li></ol></li><li><a href="FAQ.html#WeiterführendeLinks">Weiterführende Links</a></li></ol></div><p>
</p>
<h2 id="ProduktnameundHistorisches">Produktname und Historisches</h2>
<h3 id="WasistFreetz">Was ist Freetz?</h3>
<blockquote>
<p>
<em>Freetz</em> ist ein Werkzeugkasten für Entwickler und versierte Anwender, um sich für diverse DSL/LAN/WLAN/VoIP-Router der Serien <a class="ext-link" href="http://www.avm.de/de/Produkte/FRITZBox/index.html"><span class="icon">​</span>AVM Fritz!Box</a> bzw.  <a class="ext-link" href="http://www.t-home.de/is-bin/INTERSHOP.enfinity/WFS/EKI-PK-Site/de_DE/-/EUR/ViewFAQTheme-Download;?ProductThemeId=theme-1000&amp;selaction=themen&amp;FaqId=theme-28565177&amp;pageNr=0&amp;bound=2&amp;itemLocator=downloads&amp;headerSelection=2&amp;SelectedTheme=theme-28565177&amp;SelectedTheme=theme-2001628"><span class="icon">​</span>T-Com Speedport</a> (baulich ähnlich) eine auf der Original-Firmware des Herstellers aufbauende, funktional modifizierte Firmware zu bauen und diese auf das Gerät zu transferieren. Es werden eine Vielzahl von Erweiterungspaketen angeboten, aber auch Möglichkeiten, nicht benötigte Funktionalität der Original-Firmware zu entfernen.
</p>
</blockquote>
<h3 id="WoherkommtderNameFreetz">Woher kommt der Name Freetz?</h3>
<blockquote>
<p>
Es handelt sich um eine (verballhornte) Zusammensetzung aus dem englischen Wort "free" (dt. frei) und dem Männernamen "Fritz", welcher an den Gerätenamen des Herstellers <a class="ext-link" href="http://www.avm.de"><span class="icon">​</span>AVM</a> erinnern soll. Wir wollen damit symbolisieren, dass es sich bei <em>Freetz</em> um freie Software handelt. Da wir marken- und urheberrechtlichen Problemen mit AVM, deren Schutzrechte auf die Marke "Fritz!" (mit Ausrufezeichen) wir ausdrücklich anerkennen, aus dem Weg gehen möchten, haben wir uns für diese deutlich unterschiedliche Schreibweise entschieden. Die Idee für den Namen stammt von Alexander Kriegisch, der sich gemeinsam mit Oliver Metz überlegte, wie das Projekt heißen sollte, wenn das versionsverwaltete Quelltext-Repository der Öffentlichkeit übergeben werden würde. Aus der (nach unserem Empfinden bescheuert klingenden) Alliteration "Free Fritz" wurde schließlich "Freetz". (Auch "OpenFritz" war im Rennen, aber wir wollten nicht <a class="ext-link" href="http://openwrt.org"><span class="icon">​</span>OpenWrt</a> nachäffen.) Wir bilden uns nicht ein, der Name sei ein großer Wurf, aber er ist kurz und wir hoffen, er ist leicht zu merken. <img src="../chrome/wikiextras-icons-16/smiley.png" style="vertical-align: text-bottom" alt=":-)" />
</p>
</blockquote>
<h3 id="WiewirdFreetzausgesprochen">Wie wird Freetz ausgesprochen?</h3>
<blockquote>
<p>
Wie das englische Wort "free" mit angehängtem deutschem "tz", pseudo-deutsch geschrieben in etwa "Friez", pseudo-englisch geschrieben in etwa "freets". Anders gesagt, wie der Männername "Fritz", aber mit langem "i" und mit englisch ausgesprochenem "r".
</p>
</blockquote>
<h3 id="WieentstandFreetz">Wie entstand Freetz?</h3>
<blockquote>
<p>
Es gibt einige Vorläufer von <em>Freetz</em>. Daniel Eiband (bekannt als "Danisahne") hat vor einigen Jahren, aufbauend auf Vor- und Zuarbeiten anderer kreativer Köpfe (Erik Andersen, Christian Volkmann, Andreas Bühmann, Enrik Berkhan u.a.), den sog. <em>Danisahne-Mod</em> (kurz: <em>DS-Mod</em>) ins Leben gerufen. So wie heute mit <em>Freetz</em>, konnte und kann man auch damit Firmware-Modifikationen bauen, allerdings noch für ältere Firmware-Versionen mit Linux-Kernel 2.4. Da einige Router noch immer auf Kernel 2.4 basierende Firmwares haben, ist Version <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=135253"><span class="icon">​</span>ds-0.2.9-p8</a> des <em>DS-Mod</em> für jene Geräte immer noch aktuell. Für die Mehrzahl aktueller Geräte war der direkte Vorläufer zu <em>Freetz</em> jedoch die von Oliver Metz ins Leben gerufene Version <em>ds26</em> (zuletzt <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=144646"><span class="icon">​</span>ds26-15.2</a>), welche ausschließlich für Firmwares mit Kernel 2.6 geeignet ist. Selbiges gilt auch für <em>Freetz</em>, denn <em>Freetz</em> ist Stand heute (20.01.2008) nichts anderes als die aktuelle Entwicklerversion von <em>ds26</em>, nur mit neuem Namen.
</p>
</blockquote>
<h3 id="WozuüberhaupteinneuerNamewodochDS-Modinzwischensobekanntist">Wozu überhaupt ein neuer Name, wo doch DS-Mod inzwischen so bekannt ist?</h3>
<blockquote>
<p>
Es gibt mehrere Gründe dafür. Zum einen ist seit gut einem Jahr Daniel nicht mehr aktiv an der Weiterentwicklung von <em>ds26</em> beteiligt gewesen, zum anderen hat er bei <a class="ext-link" href="http://sourceforge.net"><span class="icon">​</span>SourceForge</a> schon etwa ebenso lange begonnen, eine von Grund auf neue <em>DS-Mod</em>-Version - nennen wir sie mal inofiziell <em>DS-Mod NG (Next Generation)</em> - zu entwickeln, deren aktueller Stand in einem öffentlich zugänglichen Quellcode-Repository auf der <a class="ext-link" href="http://ds-mod.sourceforge.net"><span class="icon">​</span>Projekt-Webseite</a> einzusehen ist. Wir wollen Daniel seinen Projektnamen nicht streitig machen und auch nicht in Konkurrenz zu ihm treten, sondern hoffen im Gegenteil, dass er eines Tages wieder mehr Zeit für sein Projekt haben wird und schlußendlich beide wieder in ein gemeinsames münden, um alle Vorteile in einem Produkt zu vereinen. Zurzeit ist es jedoch so, dass beide Projekte sich deutlich auseinander entwickelt haben: <em>DS-Mod NG</em> hat eine sehr saubere Struktur, ist jedoch noch lange nicht fertig, <em>Freetz</em> (bzw. bisher <em>ds26</em>) ist hundertfach im Einsatz und wird eher während der laufenden Entwicklung immer wieder mal Refactoring-Maßnahmen unterworfen. Wo zuletzt in der Presse (z.B. <a class="ext-link" href="http://www.pcwelt.de/start/dsl_voip/dsl/praxis/98946/index3.html"><span class="icon">​</span>PC-Welt</a>) vom <em>DS-Mod</em> gesprochen wurde, war <em>Freetz</em> alias <em>ds26</em> gemeint.
</p>
</blockquote>
<h2 id="Motivation">Motivation</h2>
<h3 id="WarumFirmwaremodifizieren">Warum Firmware modifizieren?</h3>
<blockquote>
<p>
Es können zwar einzelne spezielle Dateien (character devices) unter /var/flash/ bearbeitet werden und sie behalten den Inhalt auch über einen Reboot hinweg, jedoch trifft das nicht auf den Rest des Dateisystems zu. Der Inhalt dieser character devices landet in einer eigenen Flash Partition, die sehr klein ist. Der überwiegende Teil des Dateisystems ist ein read-only Squashfs Image, welches in einem Firmware Update enthalten ist. Um (größere) Dateien dauerhaft in die Firmware einzubinden müssen sie in dieses Squashfs Image gelangen, welches unter anderem in Freetz implementiert ist.
</p>
</blockquote>
<h2 id="Verbreitung">Verbreitung</h2>
<h3 id="WarumwerdenkeinefertigenmodifiziertenImagesangeboten">Warum werden keine fertigen modifizierten Images angeboten?</h3>
<blockquote>
<p>
Die Lizenz, unter welcher die Firmwares von AVM bereitgestellt werden, untersagt dies.
</p>
</blockquote>
<h3 id="WokannFREETZheruntergeladenwerden">Wo kann FREETZ heruntergeladen werden?</h3>
<blockquote>
<p>
Auf der Startseite sind unter <a class="wiki" href="WikiStart.html#Quellcode">Quellcode</a> die Möglichkeiten zum <a class="wiki" href="Download.html">Download</a> von FREETZ aufgelistet. Es werden sowohl erprobte stabile Versionen von FREETZ als auch Entwicklerversionen angeboten. Zum Bauen eines FREETZ-Images wird LINUX zwingend vorausgesetzt. Es muss nicht unbedingt ein natives Linux-System auf dem PC bereits vorhanden sein. Auch eine Virtuelle Maschine eurer Wahl oder eine Live-CD mit Linux können zum Bauen von FREETZ benutzt werden.<br />
</p>
</blockquote>
<h3 id="WelcheBoxenundwelcheFirmwareswerdendurchFreetzunterstützt:">Welche Boxen und welche Firmwares werden durch Freetz unterstützt:</h3>
<blockquote>
<p>
a.) <a class="source" href="/browser/tags/freetz-1.1.5/FIRMWARES">Freetz-1.1.5</a><a class="trac-rawlink" href="/export/HEAD/tags/freetz-1.1.5/FIRMWARES" title="Download">​</a><br />
b.) <a class="source" href="/browser/branches/freetz-stable-2.0/FIRMWARES">freetz-stable-2.0</a><a class="trac-rawlink" href="/export/HEAD/branches/freetz-stable-2.0/FIRMWARES" title="Download">​</a><br /> 
c.) <a class="source" href="/browser/trunk/FIRMWARES">Trunk</a><a class="trac-rawlink" href="/export/HEAD/trunk/FIRMWARES" title="Download">​</a><br />
</p>
</blockquote>
<h2 id="Entwicklung">Entwicklung</h2>
<h3 id="WannkommtVersionxy">Wann kommt Version xy?</h3>
<blockquote>
<p>
Grundsätzlich: It's done when it's done. Die Entwickler arbeiten in ihrer Freizeit, und Releases gibt es dann, wenn die beschlossenen Features fertig und release-kritische Bugs behoben sind.
</p>
</blockquote>
<blockquote>
<p>
Es gibt jedoch einen groben Plan für die Releases: 3-4 Monate nach einer stabilen Release gibt es einen Feature Freeze für die nachfolgende Release. Ab diesem Zeitpunkt werden nur noch Bugs behoben. Die Feature-Freeze-Termine werden in der <a href="/roadmap">Roadmap</a> angekündigt. Nach dem Feature Freeze kann grob nach 1 bis 1,5 Monaten mit dem Release gerechnet werden. Zwischen den stabilen Feature-Releases gibt es ggfs. weitere Maintenance-Releases, die nur neue Firmwareversionen von AVM unterstützen und Fehler beheben.
</p>
</blockquote>
<h3 id="TrunkBranchesTags">Trunk, Branches, Tags?</h3>
<p>
Der <a class="source" href="/browser/trunk">Trunk</a> ist der aktuelle Entwicklungszweig. Unter einem Branch versteht man ein Zweig, der zu einer bestimmten Zeit (z.B. <a class="changeset" href="/changeset/10373" title="create 2.0 branch on base of r10366 (refs #2072)
">r10373</a>) aus dem Trunk abgetrennt wurde. Hier gibt es derzeit den Branch <a class="source" href="/browser/branches/freetz-stable-2.0">freetz-stable-2.0</a>. Alle Releaseversionen bekommen einen Tag (z.B. <a class="source" href="/browser/tags/freetz-1.2">freetz-1.2</a>. Zukünftig wird das dann der Tag 2.0 werden.<br />
Auschecken einer stabilen Version:
</p>
<pre class="wiki">svn co http://svn.freetz.org/branches/freetz-stable-2.0 freetz-stable-2.0
</pre><p>
Auschecken eines Tags:
</p>
<pre class="wiki">svn co http://svn.freetz.org/tags/freetz-1.2 freetz-1.2
</pre><p>
Nach Erscheinen des neuen Tag 2.0 wird dieser dann wie folgt ausgecheckt:
</p>
<pre class="wiki">svn co http://svn.freetz.org/tags/freetz-2.0 freetz-2.0
</pre><p>
Auschecken einer Entwicklerversion (trunk):
</p>
<pre class="wiki">svn co http://svn.freetz.org/trunk freetz-trunk
</pre><p>
Achtung! Die Entwicklerversion (trunk) ist nur für fortgeschrittene Benutzer zu empfehlen, die mit Linux-Grundlagen vertraut sind, sich bei elementaren Problemen selbst helfen können und den Entwicklern einen qualitativen Feedback geben können. Da es sich hierbei um eine laufende Entwicklung handelt, ist die Stabilität der Entwicklerversion meist nicht so hoch, wie bei Branches und Tags.
</p>
<h3 id="WannistFeatureXYfertig">Wann ist Feature XY fertig?</h3>
<blockquote>
<p>
Der schnellste Weg zur Fertigstellung ist die Präsentation einer funktionierenden Lösung. Wir notieren uns jedes sinnvoll erscheinende Feature Request. Da wir Freetz aber in unserer Freizeit gestalten, muss man sich halt manchmal gedulden.
</p>
</blockquote>
<h3 id="FreetzgefälltmirundichmöchtedieWeiterentwicklungunterstützen.">Freetz gefällt mir und ich möchte die Weiterentwicklung unterstützen.</h3>
<blockquote>
<p>
Hier gibt es einmal die Möglichkeit dem Entwicklerteam eine Geldspende zukommen zu lassen. Dazu ist in der rechten untern Ecke ein Paypal-Spendenbutton angebracht. Weiterhin kann eine Box natürlich besser unterstützt werden, wenn das Entwicklerteam "Testboxen" besitzt. Im <a class="ext-link" href="http://www.ip-phone-forum.de/showpost.php?p=959253&amp;postcount=1"><span class="icon">​</span>IPPF</a> existiert ein Thread zum Thema Spenden.
</p>
</blockquote>
<h2 id="Vorkonfigurationmenuconfig">Vorkonfiguration (menuconfig)</h2>
<h3 id="WieerkennneichwelcheVarianteder7270ichbesitze">Wie erkennne ich welche Variante der 7270 ich besitze?</h3>
<blockquote>
<p>
Siehe <a class="wiki" href="help/fritz_faq.html#WoranerkenneichdassicheineFB7270v3habe">hier</a>.
</p>
</blockquote>
<h3 id="WelchePaketesolltemaninsFreetzImagesinnvollerweiseeinbauen">Welche Pakete sollte man ins Freetz Image sinnvollerweise einbauen?</h3>
<blockquote>
<p>
Sinnvoll ist Dropbear um später einen SSH Zugang zu haben, dnsmasq als DNS- und DHCP-Server Ersatz, sowie das Syslog-Webif um Fehler zu erkennen.
</p>
</blockquote>
<h3 id="Wasbedeutetbinaryonly">Was bedeutet "binary only"?</h3>
<blockquote>
<p>
"binary only" heißt, dass für das ausgewählte Paket nur das Programm ("binary") selbst erstellt wird, jedoch kein Webinterface, init-Skripte etc. vorhanden sind. Dies bedeutet, dass man sich selbst um die Konfiguration und das Starten des Programms kümmern muss.
</p>
</blockquote>
<h3 id="WasbedeutetEXPERIMENTALoderdieKategorieunstable">Was bedeutet "EXPERIMENTAL" oder die Kategorie "unstable"?</h3>
<blockquote>
<p>
Die so gekennzeichneten Pakete haben bekannte Probleme und können/sollten nicht benutzt werden. Evtl gibt es dazu noch ein offenes <a href="/report/9">Ticket</a>
</p>
</blockquote>
<h3 id="Funktioniertiptablesnatconntrack">Funktioniert iptables/nat/conntrack?</h3>
<blockquote>
<p>
IPtables funktioniert überall. Allerdings wird in Fritz!OS 05.2x und 05.5x von AVM der PacketAccelerator genutzt. Durch diesen funktioniert conntrack nicht mehr. Und damit nat/masquerading/state/transparenter Proxy und alles was sonst noch von conntrack abhängt.<br />
Abhilft schafft ein Downgrade auf eine alte Firmware, zB bei der 7270 ein "Alien" mit 04.88 oder gleich Freetz-1.2.<br />
Da AVM den Quellcode des PacketAccelerator veröffentlicht hat, könnte das Problem von jemandem mit viel Zeit und Wissen behoben werden.<br />
Das Thema wird in Ticket <a class="new ticket" href="/ticket/1605" title="defect: iptables/nat/conntrack &amp; kernel 2.6.28/2.6.32 (new)">#1605</a> behandelt, und so lange das Ticket noch nicht geschlossen ist besteht das Problem.<br />
</p>
</blockquote>
<h3 id="PacketAcceleratorAVMPA">Packet Accelerator (AVM PA)</h3>
<p>
Der Packet Accelerator bringt auch den Nachteil mit sich, dass tcpdump etc nicht mehr alle Pakete sehen. Um den PA bis zum nächsten Reboot temporär zu deaktivieren:<br />
<tt>echo disable &gt; /proc/net/avm_pa/control</tt><br />
Dies bringt den Nachteil mit sich, dass zB die 7390 keine 100 MBit/s mehr im ATA-Modues routen kann sondern nur noch ~ 40 MBit/s. Siehe auch <a class="wiki" href="FAQ.html#Funktioniertiptablesnatconntrack">Funktioniert iptables/nat/conntrack?</a>
</p>
<h3 id="WasbedeutetnotavailablenosourcesbyAVM">Was bedeutet "not available, no sources by AVM"?</h3>
<blockquote>
<p>
Die für diese Firmware passenden Kernelquellen wurden noch nicht in Freetz integriert. Meist ist die Ursache dafür, dass AVM diese noch nicht veröffentlicht hat. Typischerweise dauert es wenige Tage bis mehrere Monate. Falls die Datei für die entsprechende FritzBox mittlerweile auf <a class="ext-link" href="ftp://ftp.avm.de/"><span class="icon">​</span>ftp://ftp.avm.de/</a> veröffentlicht wurde, ein Ticket dafür öffnen.
Um den Vorgang zu beschleunigen empfiehlt sich, wie in den <a class="ext-link" href="ftp://ftp.avm.de/fritz.box/fritzbox.fon_wlan_7390/firmware/deutsch/info.txt"><span class="icon">​</span>info.txt</a> beschrieben, schriftlich an AVM zu wenden: <tt>fritzbox_info@avm.de</tt>.
</p>
</blockquote>
<h2 id="ErstellenvonFirmware-ImagesmakeBuild">Erstellen von Firmware-Images (make/Build)</h2>
<h3 id="Wasbedeutendieeinzelnenmake-targetsz.B.dircleandistcleanconfig-clean-depsetc.">Was bedeuten die einzelnen make-targets (z.B. dirclean, distclean, config-clean-deps etc.)?</h3>
<p>
A: Die make-targets beeinflussen den <a class="wiki" href="help/howtos/development/freetz_make.html">Build-Prozess</a> bei der FW-Erstellung. Viele der folgenden Infos entstammen (<a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?p=1185868"><span class="icon">​</span>diesem Thread</a>).
</p>
<p>
<strong>1. Aufräumen:</strong>
</p>
<ul><li><em> make clean<br /> </em>&hellip;
</li></ul><ul><li><em>make &lt;Paket&gt;-clean</em>:<br /> ruft normalerweise das clean-Target des Source-Makefiles auf. Dieses wird typischerweise alle generierten Dateien (vor allem Object-Dateien, Libraries und ausführbare Programme) löschen.<br /> Ein nachfolgendes <em>make</em> wendet keine geänderten Patches an, sondern erstellt nur die o.g. Object-Dateien, Libraries und ausführbare Programme neu (compilieren).<br /> Z.B. räumt <em>make mc-clean</em> so das Paket "Midnight Commander" (mc) auf.
</li></ul><ul><li><em>make &lt;Paket&gt;-dirclean</em>:<br /> löscht das gesamte Verzeichnis des Pakets. Ein nachfolgendes <em>make</em> wird die Quellen neu auspacken, die Patches anwenden, das Paket konfigurieren und dann compilieren.<br /> Nur der letzte Schritt (compilieren) wird nach <em>make &lt;Paket&gt;-clean</em> (s.o.) ausgeführt.
</li></ul><ul><li><em>make dirclean</em>:<br /> führt, wie der Name schon sagt, ein "Verzeichnis-Aufräumen" durch. Hierbei werden unter anderem die Verzeichnisse <em>/packages, /source, /build, /toolchain/build, toolchain/target</em> (und ein paar andere Sachen(?)) gelöscht, sodass bei erneutem Ausführen von <em>make</em> alles neu gebaut werden muss. Dies ist empfehlenswert, wenn sich Aufgrund eines <em>svn up</em> eine neu gebaute Firmware nicht so Verhält, wie man es erwartet. Alternativ kann man, wenn man weiß, an welchem Packet es liegt, dieses auch via <em>make &lt;Paket&gt;-dirclean</em> einzeln  löschen (siehe oben).<br />Zu erwähnen sei noch, dass nach einem <em>make dirclean</em> der Bau der Firmware natürlich länger dauert, da ja alles neu gebaut werden muss.
</li></ul><ul><li><em>make tools-distclean</em>:<br /> löscht die Tools (busybox, lzma, squashfs, usw.)
</li></ul><ul><li><em>make distclean</em>:<br /> Hier werden zusätzlich zum <em>make dirclean</em> auch noch die Downloads sowie die Tools gelöscht.
</li></ul><ul><li><em>make config-clean-deps</em>:<br /> Wenn bei <em>make menuconfig</em> Pakete abgewählt wurden, sind ggfs. noch Shared Libraries ausgewählt, die nicht mehr benötigt werden (dies kann <em>menuconfig</em> nicht automatisch erkennen). Diese kann man dann manuell unter 'Advanced Options'→'Shared Libraries' abwählen - die benötigten lassen sich nicht deaktivieren. Alternativ kann man dies automatisch mittels <em>make config-clean-deps</em> erledigen lassen. Dabei werden übrigens auch manuell in <em>make menuconfig</em> ausgewählte Busybox-Applets deselektiert (*nicht* die in <em>make busybox-menuconfig</em>!), d.h. die Busybox-Einstellungen werden auf Standardwerte zurückgesetzt.
</li></ul><ul><li><em>make config-clean-deps-keep-busybox</em>:<br /> Wie <em>make menuconfig</em>, aber die Busybox-Einstellungen bleiben bestehen.
</li></ul><ul><li><em>make kernel-dirclean</em>:<br /> löscht den aktuell entpackten Source-Tree des Kernels, um von komplett sauberen Kernel Sourcen zu kompilieren (wichtig wenn was an den Patches geändert wird)
</li></ul><ul><li><em>make kernel-clean</em>:<br /> analog <em>make &lt;Paket&gt;-clean</em>
</li></ul><ul><li><em>make kernel-toolchain-dirclean</em>:<br /> löscht den Kernel-Compiler
</li></ul><ul><li><em>make target-toolchain-dirclean</em>:<br /> löscht den Compiler für die uClibc und die Binaries (ausführbare Programme)
</li></ul><p>
<strong> 2. Vorbereitungen:</strong>
</p>
<ul><li><em>make world</em>:<br /> Vorraussetzung ist eine Toolchain (siehe <a class="wiki" href="help/howtos/development/create_cross-compiler_toolchain.html">Cross-Compiler / Toolchain erstellen</a>). Sollten jemals Probleme mit nicht vorhandenen Verzeichnissen auftauchen, so kann ein <em>make world</em> Abhilfe schaffen. In der Regel sollte das aber nicht nötig sein.
</li></ul><ul><li><em>make kernel-toolchain</em>:<br /> kompiliert den Kernel und auch für das target (Fritzbox)<br /> Aus historischen Gründen wurde die Bezeichnung als <em>kernel-toolchain</em> belassen, obwohl damit wie gesagt nicht nur der Kernel gebaut wird, sondern auch Pakete (s.u.).
</li></ul><ul><li><em>make target-toolchain</em>:<br /> kompiliert die Pakete für das target (Fritzbox)
</li></ul><ul><li><em>make kernel-menuconfig</em>:<br /> Die Konfiguration des Kernels wird danach wieder nach ./make/linux/Config.&lt;kernel-ref&gt; zurückgespeichert.
</li></ul><ul><li><em>make kernel-precompiled</em>:<br /> Damit werden der Kernel und die Kernel Module kompiliert.
</li></ul><ul><li><em>make menuconfig</em> (<a class="wiki" href="help/howtos/common/install/menuconfig.html">Quelle</a>): Zum Konfigurieren von Freetz kommt das Programm <em>conf/mconf</em> zum Einsatz, welches dem ein oder anderen vielleicht von der Konfiguration des Linux Kernels bekannt ist. Die <a class="ext-link" href="http://de.wikipedia.org/wiki/Ncurses"><span class="icon">​</span>ncurses</a> Variante <em>mconf</em> kann mit dem Kommando <em>make menuconfig</em> aufgerufen werden. <br />   <span class="underline">Übrigens</span>:<br />Eine Hilfe zu den einzelnen Punkten kann direkt in <em>menuconfig</em> durch Eingabe von "?" aufgerufen werden.<br />Und nach Eingabe von "/" kann man von allen Ebenen aus nach beliebigen Zeichenfolgen suchen - sehr praktisch.
</li></ul><h3 id="BeimErstellentritteinFehleraufwasnun">Beim Erstellen tritt ein Fehler auf, was nun?</h3>
<blockquote>
<p>
Zunächst einmal die folgende Liste der häufigen Fehler durchgehen:
</p>
</blockquote>
<h4 id="YoumusthaveeitherhavegettextsupportinyourClibraryorusetheGNUgettextlibrary.">You must have either have gettext support in your C library, or use the GNU gettext library.</h4>
<blockquote>
<p>
Hier ist wohl ein falscher Wert im Cache gelandet, den man löschen muss: "rm make/config.cache" oder "rm source/target-mipsel_uClibc-<em>0.X.XX</em>/config.cache" jenachdem, wo die Datei zu finden ist. Und danach wird der FW-Bau wieder mit "make" gestartet.
</p>
</blockquote>
<h4 id="ERROR:Theprogramlibraryheaderxywasnotfound">ERROR: The program/library/header xy was not found&hellip;</h4>
<blockquote>
<p>
Wenn mit die ersten Meldungen so aussehen, fehlen für die Erstellung von Freetz unbedingt notwendige Pakete im Build-System und müssen zunächst installiert werden.
</p>
</blockquote>
<h4 id="WARNING:Theprogramlibraryheaderxywasnotfound">WARNING: The program/library/header xy was not found&hellip;</h4>
<blockquote>
<p>
Wenn die Erstellung mit einem Fehler abbricht, kann diese Warnung zu Beginn des Vorgangs darauf hindeuten, dass für bestimmte ausgewählte Optionen notwendige Pakete im Build-System fehlen.
</p>
</blockquote>
<h4 id="Couldnotdownloadfirmwareimage">Could not download firmware image</h4>
<h5 id="ehemals:NosuchfileFRITZ.Box_xxxxxxxxx.aa.bb.cc.image">(ehemals: No such file `FRITZ.Box_xxxxxxxxx.aa.bb.cc.image')</h5>
<blockquote>
<p>
AVM selbst stellt für einen Box-Typ meist nur das aktuellste Firmware-Image zum <a class="wiki" href="Download.html">Download</a> bereit. Jede Freetz-Version unterstützt lediglich nur die Versionen, die in der Datei <tt>FIRMWARES</tt> aufgelistet sind. Aus lizenzrechtlichen Gründen darf das Freetz-Projekt keine AVM-Firmwares bereitstellen.<br />
Anbei Lösungsvorschläge:
</p>
</blockquote>
<ul><li>Allgemeiner Hinweis: Im <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=119856"><span class="icon">​</span>Suche-Firmware-Sammelthread</a> kann man nach älteren Firmware-Versionen fragen (das Firmware-Image manuell in den Ordner <tt>'dl/fw/'</tt> im Freetz-Verzeichnis kopieren).
</li><li>Einsteiger: Stets die aktuellste <a class="wiki" href="WikiStart.html#StabileVersion">stabile Version</a> benutzen oder die <a class="wiki" href="WikiStart.html#Vorabversion">Vorabversion</a> probieren!
</li><li>Fortgeschrittene/Entwickler: Die <a class="wiki" href="WikiStart.html#Entwicklerversion">Entwicklerversion</a> unterstützt (meist) alle aktuellen Firmware-Versionen.
</li><li>Experimentierfreudige User: In <a class="wiki" href="help/howtos/common/install/menuconfig.html">make menuconfig</a> unter <em>Advanced Options &rArr; Override firmware source</em> den Namen der herunterzuladenen Image Datei anpassen.<br />
<img src="../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> Vorsicht: Evtl. sind weitere Anpassungen im Quellcode notwendig und zur Sicherheit ein passendes Recover-Image bereit halten.
</li></ul><h4 id="Pleasecopythefollowingfileintothedlfwsub-directorymanually:fritz_box_aa_bb_cc-ddddd.image">Please copy the following file into the 'dl/fw' sub-directory manually: fritz_box_aa_bb_cc-ddddd.image</h4>
<blockquote>
<p>
Die Labor-Firmwares können nicht direkt vom AVM-FTP-Server heruntergeladen werden. Sie müssen manuell von der <a class="ext-link" href="http://www.avm.de/Labor"><span class="icon">​</span>AVM-Labor-Seite</a> geladen werden, wobei die Nutzungsbedingungen zu bestätigen sind. Die Dateien müssen dann entpackt und das darin enthaltene Image in den Ordner 'dl/fw' im Freetz-Verzeichnis kopiert werden. Hierbei gilt auch das zur vorigen Frage Gesagte.
</p>
</blockquote>
<h4 id="a.ln:cannotexecutebinaryfile">./ln: cannot execute binary file</h4>
<blockquote>
<p>
Das aktuelle Verzeichnis '.' ist im Pfad (Variable PATH). Zum erfolgreichen Erstellen muss es entfernt werden.
</p>
</blockquote>
<h4 id="Filesystemimagetoobig">Filesystem image too big</h4>
<blockquote>
<p>
Das Firmware-Image passt nicht in den Flash-Speicher der ausgewählten Box.
</p>
</blockquote>
<ul><li>Bei manchen Boxen kann dies bereits auftreten, wenn überhaupt keine zusätzlichen Pakete ausgewählt sind, da die grundlegende Freetz-Infrastruktur bereits einigen Platz belegt und die AVM-Images schon knapp unter dem Maximalwert liegen. In diesem Fall ist es notwendig, unter 'Patches' einen oder mehrere der Remove-Patches auszuwählen, um nicht benötigte Komponenten der Original-Firmware zu entfernen. Näheres dazu im <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=136974"><span class="icon">​</span>IPPF</a> und in <a class="ext-link" href="http://wiki.ip-phone-forum.de/software:ds-mod:development:platz_sparen"><span class="icon">​</span>WIKI</a>
</li><li>Wenn viele Pakete ausgewählt sind, sollte man sich beschränken oder versuchen per <a class="wiki" href="packages/usbroot.html">USBRoot</a> oder <a class="wiki" href="packages/nfs.html">NFSRoot</a> die Beschränkung des Flashs zu umgehen. 
</li><li>Bei Boxen mit einem USB-Host (z.B. 7170,7270) kann man außer <a class="wiki" href="packages/usbroot.html">USBRoot</a> auch einzelne Pakete auf das externe USB-Medium (z.B. USB-Stick, USB-Festplatte) auslagern. Die Auslagerung wird nach dem make-Prozess automatisch von einem Skript namens <a class="wiki" href="help/howtos/common/external.html">external</a> ausgeführt. Im menuconfig finden sich die Optionen für die Auslagerung mittels external. Im Unterschied zum USB-Root wird hier nicht die gesamte Firmware, sondern nur ein Teil der Pakete ausgelagert.
</li><li>Wenn Pakete abgewählt wurden, sind ggfs. noch Shared Libraries ausgewählt, die nicht mehr benötigt werden (dies kann menuconfig nicht automatisch erkennen). Diese kann man dann manuell unter 'Advanced Options'&rarr;'Shared Libraries' abwählen - die auf benötigten lassen sich nicht deaktivieren. Alternativ kann man dies automatisch mittels <em>make config-clean-deps</em> bzw. <em>make config-clean-deps-keep-busybox</em> erledigen lassen.
</li></ul><h4 id="WARNING:Notenoughfreeflashspaceforansweringmachine">WARNING: Not enough free flash space for answering machine!</h4>
<blockquote>
<p>
Im Gegensatz zur Meldung "Filesystem image too big" passt das Firmware-Image in den Flash-Speicher der ausgewählten Box, der restliche Platz im Flash könnte aber für die Aufzeichnung von Nachrichten auf dem von AVM in der FW integrierten Anrufbeantworter zu klein sein oder komplett fehlen. Die Firmware sollte trotz dieser Warnung funktionieren, für Anrufbeantworter-Daten, FAX-Nachrichten und Sonstiges empfiehlt sich einen Stick mit einer FAT-Partition anzulegen und entsprechend in AVM-WebIF angeben, dass der Anrufbeantworter (oder andere Dienste) den externen Speicher nutzen sollten.
</p>
</blockquote>
<blockquote>
<p>
Hintergrundinformationen: Seit einigen Firmware-Versionen versucht AVM die restlichen Bytes im Flash dafür zu nutzen, eine jffs2-Partition anzulegen. Auf dieser Partition werden z.B. Anrufbeantworter-Nachrichten (TAM) und evtl. noch Faxe und Ähnliches abgespeichert. Bei älteren Boxen (z.B. 7170) kommt es fast immer dazu, dass im Image kaum mehr Platz frei ist, sodass die jffs2-Partition nicht angelegt wird und die Meldung nur als Warnhinweis angesehen werden sollte. Mehr dazu im <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=186208"><span class="icon">​</span>IPPF-Thread</a>. In FREETZ seit Revision <a class="changeset" href="/changeset/3049" title=" * Add hint for phone  boxes with tam if there is not enough free space ...">r3049</a>.
</p>
</blockquote>
<h3 id="BeimErstellentrittimmernocheinFehlerauf">Beim Erstellen tritt immer noch ein Fehler auf&hellip;</h3>
<blockquote>
<p>
Zunächst einmal im menuconfig unter 'Advanced Options' das 'Verbosity Level' auf 2 stellen und das make erneut ausführen. Danach im <a class="ext-link" href="http://www.ip-phone-forum.de/forumdisplay.php?f=525"><span class="icon">​</span>IPPF Forum</a> nach der relevanten Fehlermeldung suchen und ggfs. einen passenden bestehenden oder neuen Thread aufmachen, wo dann unter Angabe der kompletten Fehlermeldung (bitte in Code-Tags), der Datei .config (als Attachment) und der verwendeten Version oder SVN-Revision um Hilfe bitten.
</p>
</blockquote>
<h3 id="IchkanndaserzeugteFreetzImagenichtfinden">Ich kann das erzeugte Freetz Image nicht finden?</h3>
<blockquote>
<p>
Freetz verschiebt alle fertigen Images in den Unterordner <em>images/</em>.
</p>
</blockquote>
<p>
<span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/116?format=raw" title=""><img src="/screenshots/116?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span><br />
</p>
<h3 id="Wofindeichdieseberühmte.config-Datei">Wo finde ich diese berühmte .config-Datei?</h3>
<blockquote>
<p>
Die .config Datei beinhaltet die Hauptkonfiguration für den make-Aufruf beim Cross-Kompilieren der Firmware und liegt genau auf der Maschine die zur Erzeugung der Firmware verwendet wird und exakt im selben Hauptverzeichnis von FREETZ, von dem auch make ausgeführt wird. In der Datei steht z.B. welche Pakete/Branding/Libs usw. man ausgewählt hat. Die Datei .config ist eine reine Textdatei und wird typischerweise nach dem Aufruf von menuconfig automatisch angelegt bzw. aktualisiert. Bitte diese Datei nicht mit Config.in verwechseln! (häufiger Fehler) Wenn man die Datei nicht sehen kann, liegt es daran, dass sie ein "dot" an der ersten Stelle hat und somit versteckt ist.
</p>
</blockquote>
<blockquote>
<p>
Alternativ kann man die Datei auch im selbsterzeugten Firmware-Image finden, denn .image-Dateien sind nichts anderes als gewöhnliche tar-Archive, die z.B. mit WinRAR oder 7Zip ausgepackt werden können.
</p>
</blockquote>
<blockquote>
<p>
Neuerdings wird die .config-Datei auch mit ins Image genommen (wenn man es nicht explizit abwählt) und befindet sich in einer komprimierten Form auf der Box. Die Datei kann über das FREETZ-WebIF angesehen und sogar herunterladen werden. Zu finden ist die Datei unter Status&rarr;FREETZ-Info.
</p>
</blockquote>
<h3 id="Wiebekommeichdie.config-DateiaufdenPC">Wie bekomme ich die .config-Datei auf den PC?</h3>
<blockquote>
<p>
Die .config bekommt man sehr einfach mit der <a class="ext-link" href="http://winscp.net/eng/download.php"><span class="icon">​</span>WinSCP-Software</a> auf den PC kopiert.
</p>
</blockquote>
<p>
Zuerst müsst Ihr euch den <a class="ext-link" href="http://winscp.net/eng/download.php"><span class="icon">​</span>WinSCP</a> auf den PC installieren und dann starten. In der Startmaske gebt Ihr folgende sachen ein (siehe Bild): <span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/110?format=raw" title=""><img src="/screenshots/110?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span> Die benötigte IP-Adresse eurer Freetz-Buildumgebung erhaltet Ihr wenn ihr folgenden Befehl in der Konsole eingebt: <strong>ifconfig</strong> <span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/114?format=raw" title=""><img src="/screenshots/114?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span> <strong>Benutzername</strong> und <strong>Kennwort</strong> sind wie gewohnt <strong>freetz freetz</strong> Als Protokoll nutzt ihr <strong>FTP (Keine Verschlüsselung)</strong> Wenn Ihr nun auf <strong>Anmelden</strong> drückt sollte folgendes Bild zu sehen sein: <span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/115?format=raw" title=""><img src="/screenshots/115?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span> Als nächstes wechseln wir in das Hauptverzeichnis von FREETZ (im Beispiel ist das <strong>freetz-trunk</strong>).  <span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/111?format=raw" title=""><img src="/screenshots/111?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span> Dort makieren wir die gesuchte .config mit der Mause und öffnen das Kontext-Menu mit der rechten Maustaste und drücken auf kopieren: <span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/112?format=raw" title=""><img src="/screenshots/112?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span> Im nächsten Fenster wählen wir nur noch das Zielverzeichnis auf dem PC aus und drücken auf <strong>Kopieren</strong>. <span class="thumbnail"><span class="aux" style="width: 411px;"><a style="border-width: 1px;" href="/screenshots/113?format=raw" title=""><img src="/screenshots/113?width=409&amp;format=raw&amp;height=325" alt="" /></a><span class="description" style="width: 411px;"></span></span></span> Jetzt solltet Ihr die <strong>.config</strong> auf eurem PC finden.<br />
</p>
<h2 id="FlashendesFirmware-Images">Flashen des Firmware-Images</h2>
<h3 id="WieinstalliereichdasFreetz-Image">Wie installiere ich das Freetz-Image?</h3>
<p>
<strong>Wenn noch eine Original-AVM-Firmware installiert ist, &hellip;</strong>
</p>
<p>
gibt es zwei Möglichkeiten:
</p>
<ul><li>die normale Installation über das AVM-Webinterface (wie gewohnt beim Update)
</li><li>das Script tools/push_firmware.sh (befindet sich im Freetz Build-Verzeichnis - also z.B. unter "freetz-1.1.4"). Hiermit lässt sich auch bei den Speedports Freetz installieren, was über das Webinterface nicht so einfach möglich ist <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=172137"><span class="icon">​</span>Unterpunkt: "Hochladen per Weboberfläche"</a>
</li></ul><p>
<strong>Wenn bereits Freetz auf der Box ist, &hellip;</strong>
</p>
<ul><li>ist die bequemste Variante das Firmware-Update über die Freetz-Webinterface-Startseite. Dabei können bei Bedarf auch die AVM-Dienste weiterlaufen (Internetverbindung bleibt somit bestehen) oder können Angehalten werden, um den zusätzlichen Platz im RAM zu gewinnen. Das Gute an dieser Methode ist, dass man nach dem Upload des Images einen ausführlichen Bericht zu sehen bekommt und anschließend den Zeitpunkt des Reboots (und somit des eigentlichen Updates) manuell festlegen kann.
</li></ul><p>
<strong>Flashen eines freetz-images + einer .<a class="wiki" href="help/howtos/common/external.html">external</a>:<br /></strong>
</p>
<p>
Grundsätzlich sei gesagt, dass für diese Funktion freetz bereits auf der Box laufen muss.
</p>
<blockquote>
<p>
Sowohl die .image-datei als auch die .external-Datei, soweit diese erstellt wurde, lassen sich mit einem einzigen Rebootvorgang auf die Box laden. <br />Dabei ist folgendes Vorgehen zu empfehlen:
</p>
</blockquote>
<ul><li>Die .external-Datei hochladen. Es wird automatisch versucht alle Programme die schon ausgelagert wurden zu beenden. Sollte ein Fehler auftreten, bitte vorher händisch alle Programme beenden. Hintergrund: Beim Upload-Vorgang wird der Inhalt der alten mit der neuen .external überschrieben.
</li><li>Die .image-Datei hochladen.
</li><li>Box-Reboot anstoßen
</li></ul><h3 id="BeimFlashenmeldetdasAVM-WebinterfacedassdasImagekeinepassendeFirmwareenthält">Beim Flashen meldet das AVM-Webinterface, dass das Image keine passende Firmware enthält</h3>
<blockquote>
<p>
Das in der Box (im Urlader) eingestellte Branding muss auch in der verwendeten Firmware enthalten sein. Also bitte mal prüfen, ob das der Fall ist und ggfs. das Image mit dem richtigen Branding neu erstellen.
</p>
</blockquote>
<h3 id="Freetz-TrunkwurdeperAVMFirmware-UpdategeflashtnachdemNeustartscheintsichabernichtsgeändertzuhaben">Freetz-Trunk wurde per AVM Firmware-Update geflasht, nach dem Neustart scheint sich aber nichts geändert zu haben</h3>
<blockquote>
<p>
Sollte nach dem Flashen von Freetz per Firmware-Update über das AVM-Webinterface und dem nachfolgenden Neustart das Freetz-Webinterface auf Port 81 nicht zur Verfügung stehen und sich auch die Firmware-Version im AVM-Webinterface nicht geändert haben, so war vermutlich das Flashen nicht erfolgreich. Ein deutlicher Hinweis darauf ist, wenn der Neustart der Box sehr schnell geht. Je nach Modell der Box und Größe der Firmware kann das Flashen ein bis zwei Minuten dauern und in dieser Zeit blinkt eine Kontroll-LED an der Box, genauso wie bei einem normalen Firmware Update. Ursache hierfür ist vermutlich ein Mangel an freiem Arbeitsspeicher auf der Box während dem Update.
</p>
</blockquote>
<p>
Dann können folgende Schritte ggf. Abhilfe schaffen:
</p>
<ul><li>Zunächst ein Image ohne irgendwelche Pakete erstellen (was sowieso empfohlen wird) und ggf. durch Remove-Patches die Größe weiter reduzieren.
</li><li>Alternativ die letzte Stable-Version oder eine andere ältere (und hoffentlich kleinere) Version runterladen und kompilieren.
</li><li>Diese Version dann über das AVM-Webinterface flashen und die Box neustarten.
</li><li>Dann das gewünschte Image über das Freetz-Webinterface (Port 81) flashen und auswählen, dass die AVM Dienste heruntergefahren werden.
</li><li>Nach dem Flash-Vorgang im angezeigten Log überprüfen, ob der Vorgang erfolgreich war, und die Box über das Freetz-Webinterface neustarten.
</li><li>Danach sollte das gewünschte Image erfolgreich geflasht worden sein.
</li></ul><blockquote>
<blockquote>
<p>
Weitere Informationen gibt es <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?p=1447104"><span class="icon">​</span>hier</a> und <a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=204328"><span class="icon">​</span>hier</a>.
</p>
</blockquote>
</blockquote>
<h2 id="ProblemenachdemerfolgreichenFlashen">Probleme nach dem (erfolgreichen) Flashen</h2>
<h3 id="WielautetdasStandard-PasswortfürFreetz">Wie lautet das Standard-Passwort für Freetz?</h3>
<blockquote>
<p>
Das Standard-Passwort für Freetz(sowohl Konsolen- als auch Website-Login) lautet 'freetz'. Benutzername für die Konsole ist 'root', für das Freetz-Webinterface standardmäßig 'admin'. Beim ersten Einloggen per Telnet (user: root) muss das Passwort geändert werden. Im Webinterface erscheint ein Hinweis, falls das Standardpasswort gesetzt ist. Ändert das Passwort bitte zu eurer eigenen Sicherheit.
</p>
</blockquote>
<h3 id="NachdemFlashenistdasAVM-Webinterfacenichtmehrerreichbar">Nach dem Flashen ist das AVM-Webinterface nicht mehr erreichbar</h3>
<blockquote>
<p>
Wenn im Image (z.B. wegen OpenVPN) die OpenSSL-Libraries eingebaut wurden, gibt es Probleme mit TR069. Es ist dann erforderlich entweder auf OpenSSL-Libs zu verzichten, sie statisch mit in die jeweiligen Pakete einzubauen (Speicherverschwendung), TR069 zu deaktivieren (funktioniert nur bei älterer Firmware) oder per patch <strong><a class="wiki" href="patches/remove_tr069.html">TR069 komplett zu entfernen</a></strong> (funktioniert auch bei aktueller Firmware). 
</p>
</blockquote>
<blockquote>
<p>
Zum Deaktivieren von TR069 muss die Datei /var/flash/tr069.cfg mittels nvi, nmcedit oder nnano editiert werden. So sollte es aussehen:
</p>
<pre class="wiki"># cat tr069.cfg
/*
* /var/flash/tr069.cfg
* Sun Sep 8 14:03:34 2002
*/

tr069cfg {
enabled = no;
igd {
...
</pre></blockquote>
<blockquote>
<p>
Bei neueren Firmwares reicht es nicht mehr aus TR069 zu deaktivieren. Hier crasht der ctlmgr auch bei anderen Aktionen beim Zugriff auf die OpenSSL-Libs. Manchmal schafft das Ersetzen der libavmhmac (im menuconfig unter Advanced Options&rarr;Shared Libraries&rarr;Crypto &amp; SSL&rarr;Replace libavmhmac) Abhilfe, aber auch das reicht bei neuesten Firmwares nicht aus und führt eventuell zu Reboot Schleifen. Unter Umständen funktionieren danach auch nicht mehr alle Funktionen, wie z.B. die FritzMini Unterstützung, das Fritz-App von AVM, u.s.w. 
</p>
</blockquote>
<blockquote>
<p>
Um heraus zu finden, ob die problematischen OpenSSL-Libs ins Image eingebunden werden, kann man folgenden Befehl ausführen:
</p>
<pre class="wiki">oliver@ubuntu:~/fritzbox/freetz/trunk$ grep -E  "libssl|libcrypto" .config
FREETZ_LIB_libcrypto=y
FREETZ_LIB_libssl=y
</pre></blockquote>
<blockquote>
<p>
Es folgt eine Liste mit Paketen die die OpenSSL-Libs benötigen, manche auch nur optional: <em>bip, curl, dropbear mit sftp-Support, mcabber, netsnmp, OpenVPN, Tor, transmission, Vsftpd und wget</em>
</p>
</blockquote>
<blockquote>
<p>
Man kann die betroffenen Pakete statisch zu bauen (d.h. ohne externe OpenSSL-Libs). Dies ist bereits für einige Pakete möglich, wie z.B. OpenVPN und CURL. Man muss allerdings beachten, dass Binaries dadurch sehr gross werden, weil die OpenSSL-Libs dann ein Teil des statischen Binary sind. In diesem Fall ist es anzuraten solche Pakete mit <a class="wiki" href="help/howtos/common/external.html">external</a> auszulagern, was aber am höheren Speicherbedarf im Betrieb nichts ändert. Auch wenn eigentlich kein Paket mehr die OpenSSL-Libs benötigt, kann es sein, dass diese immer noch ins Image gepackt werden. Das kommt daher, dass menuconfig eine automatische Abwahl nicht unterstützt. Hierfür gibt es den Befehl <em>make config-clean-deps</em> bzw. <em>make config-clean-deps-keep-busybox</em>.
</p>
<pre class="wiki">oliver@ubuntu:~/fritzbox/freetz/trunk$ make config-clean-deps
Step 1: temporarily deactivate all kernel modules, shared libraries and optional BusyBox applets ... DONE
Step 2: reactivate only elements required by selected packages ... DONE
The following elements have been deactivated:
  FREETZ_BUSYBOX_BRCTL
  FREETZ_LIB_libcrypto
</pre></blockquote>
<blockquote>
<p>
Vorsicht: Wie im Beispiel zu sehen werden hierbei auch Optionen deaktiviert die absichtlich gewählt aber nicht per default aktiviert sind.
</p>
</blockquote>
<h3 id="NachdemFlashenistdieBoxnichtmehrerreichbarundoderrebootetständig">Nach dem Flashen ist die Box nicht mehr erreichbar und/oder rebootet ständig</h3>
<blockquote>
<p>
Dies kann unterschiedlichste Gründe haben. Zuerst sollte man die Box vom DSL trennen und neustarten. Tritt das Problem dann nicht mehr auf hat man höchst wahrscheinlich einen <strong><a class="wiki" href="FAQ.html#NachdemFlashenistdasAVM-Webinterfacenichtmehrerreichbar">Konflikt mit TR069</a></strong>.
</p>
</blockquote>
<blockquote>
<p>
Wenn das nicht half lässt sich das Problem durch Einspielen einer anderen Firmware in der die problematische Funktion nicht enthalten ist eingrenzen. Grundsätzlich wird dies natürlich bei den Original-Firmwares von AVM der Fall sein; man kann aber auch durch Deaktivieren von Optionen und Neuerstellen von Freetz ausprobieren, woran es liegt. Da das Webinterface nicht mehr erreichbar ist, muss ein Update auf andere Weg erfolgen. Hier gibt es drei Möglichkeiten:
</p>
</blockquote>
<ul><li>Das Script tools/push_firmware.sh. Hiermit lassen sich beliebige Images einspielen.
</li><li>Ein Recover-Image von AVM. Dieses spielt wieder eine Original-Firmware von AVM ein.
</li><li>Update über das Freetz Interface falls nur das AVM Interface nicht erreichbar ist (häufig bei TR069 Konflikten).
</li></ul><h3 id="BeimAufrufdesOriginal-AVM-WebinterfacevonaussenbekommeichtrotzPortweiterleitungnureineweisseSeite">Beim Aufruf des Original-AVM-Webinterface von aussen bekomme ich trotz Portweiterleitung nur eine weisse Seite?</h3>
<blockquote>
<p>
Dies ist ein 'Sicherheitsmechanismus' von AVM der offensichtlich überprüft ob der Hostname unter dem die Box aufgerufen wurde per Reverse-DNS Anfrage zur Box führt. Hierbei werden sowohl die internen Hostnamen akzepriert wie fritz.box oder fritz.fonwlan.box als auch der DynDNS Hostname oder eigene (zb mit dnsmasq) vergebene Namen. Löst der Name falsch auf wird eine leere Seite gezeigt. Dies ist z.B. grundsätzlich bei Remote Zugriff auf Boxen im IP-Client Modus der Fall da hier die Box den DynDNS Hostnamen und die externe IP nicht kennt. Das Problem tritt aber auch auf wenn die IP der Box und eventuelle Aliase in der exhosts Datei nicht übereinstimmen (manchmal ein nützlicher Hinweis).
</p>
</blockquote>
<blockquote>
<p>
Es gibt (mindestens) 2 Möglichkeiten diese Probleme zu umgehen:
</p>
</blockquote>
<ul><li>Schnell: Man kann eine Browser Erweiterung installieren, welche es erlaubt, den 'HTTP_REFERER' zu unterdrücken.
</li><li>Komfortabel: Man startet zb mit 'Putty Portable' einen Dynamischen SSH Tunnel nach Hause (zu localhost) den man im Browser als Socks5 Proxy mit entfernter DNS Auflösung einträgt und nutzt seine LAN internen Hostnamen (auch die von dnsmasq) und IPs. Dies hat den Vorteil das man nur einen SSH port nach aussen freigeben muss um Zugriff auf alle TCP basierten Dienste aller Geräte zu Hause zu haben - egal ob HTTP, HTTPS oder FTP und auf welchem Port. Auch funtionieren alle LAN internen Bookmarks wie zu Hause. Um bequem zwischen direktem und Proxy Zugriff umschalten zu können hilft zb. der Firefox Plugin 'FoxyProxy' der sich auch auf 'Firefox Portable' installieren lässt. Wenn man dann noch über HTTPS seine Box(en) administriert ist die Verbindung auch lokal auf Gastsystemen nicht abhörbar. Dieses Verfahren funktioniert super mit dropbear als server. Der ssh client von dropbear unterstützt dagegen leider keine dynamischen Tunnels, wohl aber jeder Linux OpenSSH client. 
</li></ul><h3 id="DasFreetz-WebinterfaceakzeptiertdieStandardkombinationfürBenutzerundPasswortadminfreetznicht">Das Freetz-Webinterface akzeptiert die Standardkombination für Benutzer und Passwort (admin/freetz) nicht</h3>
<p>
In den meisten Fällen hilft es, wenn man die Freetz-Konfiguration (und alle anderen Mods) löscht. Dies kann zum Beispiel über ein Pseudo-Firmware Update mit Hilfe des <a class="source" href="/browser/trunk/tools/images/uninstall.image">uninstall.image</a><a class="trac-rawlink" href="/export/HEAD/trunk/tools/images/uninstall.image" title="Download">​</a> geschehen.
</p>
<h3 id="KannmanPaketePatchesnachinstallierenohnedasFREETZ-Imageneuzuerstellen">Kann man Pakete/Patches nachinstallieren, ohne das FREETZ-Image neu zu erstellen?</h3>
<blockquote>
<p>
Nein, das ist im Normalfall und ohne Weiteres nicht möglich. Nach einer Veränderung der Konfiguration unter "menuconfig" sollte typischerweise ein "make" ausgeführt werden, welches als Ergebnis ein neues Image liefern soll. Dieses Image muss dann über Firmware-Update auf die Box gebracht werden, wenn man seine Änderungen auf der Box haben will. Einer der Gründe dafür ist das spezielle Dateisystem im Flash-Speicher der Box. Dieses Dateisystem ähnelt einer Archivdatei, ist sehr stark komprimiert und speziell für Flash-Speicher optimiert. Änderungen in einem solchen Dateisystem sind jedoch immer mit einer neuen Rearchivierung verbunden und erfordern somit den Neuaufbau des kompletten Systems.
</p>
</blockquote>
<blockquote>
<p>
Es gibt jedoch Ausnahmen aus dieser Regelung:
</p>
</blockquote>
<ul><li><a class="wiki" href="help/howtos/common/external.html">external</a>. Man kann nur die Binaries der ausgelagerten Pakete neu kompilieren. Somit kann man z.B. ein Paket updaten, ohne ein neues Image zu erstellen. Diese Methode ist allerdings sehr riskant, weil external typischerweise nicht alle Dateien auslagert. Somit läuft man immer Gefahr Versionsunterschiede zwischen den ausgelagerten und fest integrierten Inhalten desselben Pakets zu bekommen.
</li><li>USB-ROOT. Hier könnte man wenigstens theoretisch das komplette Dateisystem (typischerweise ext2) "on the fly" ändern und braucht dafür kein Firmwareupdate. Allerdings wird auch hier dringend empfohlen das USB-ROOT-System grundsätzlich als "read-only" zu mounten und nur bei Bedarf (z.B. fürs Update) es kurzzeitig beschreibbar zu machen.<br />
</li></ul><h3 id="NachdemFlashenistdasFreetz-Webinterfacenichtmehrerreichbar">Nach dem Flashen ist das Freetz-Webinterface nicht (mehr) erreichbar</h3>
<blockquote>
<p>
Bei der Firmware XX.05.05 (7240, 7270 V2, 7270 V3 und 7390) belegt ein AVM Daemon (contfiltd) den vom Freetz Webinterface verwendeten Port 81. Um wieder Zugriff auf das Freetz Webinterface zu erhalten ist die Kindersicherung im AVM Webinterface zu deaktivieren. Wer dieses Feature benötigt sollte das Freetz Webinterfaces auf einen anderen Port verlegen. Dies kann über das Webinterface (Freetz&rarr;Weboberfläche) oder per Kommandozeile (Telnet, SSH) erledigt werden.
</p>
</blockquote>
<h3 id="DerdynamischeTeildesAVM-Webinterfaceverhältsichnichtwieerwartet">Der dynamische Teil des (AVM-)Webinterface verhält sich nicht wie erwartet</h3>
<p>
Aktualisiert man die Firmware und macht dabei einen Versionssprung im AVM Teil (z.B. von 05.05 nach 05.21 bei der 7270v2 oder von einer Laborversion 05.06 nach 05.21 bei der 7390), kann es vorkommen, dass der dynamische Teil des Webinterfaces nicht ordnungsgemäß funktioniert (z.B. JavaScript Fehler "jxl.getFormElements is not a funtion"). Besonders auffällig ist das unter <em>Internet&rarr;Zugangsdaten</em>: Wechselt man zwischen den Zugangsmöglichkeiten, sollte sich die Seite eigentlich dynamisch (JavaScript) anpassen, tut sie aber nicht. Daher grundsätzlich <strong>nach einer Firmwareaktualisierung</strong>, und insbesondere wenn das Webinterface auffällig erscheint, <strong>den Browsercache löschen</strong>!
</p>
<h2 id="Freetzaktualisieren">Freetz aktualisieren</h2>
<h3 id="IchhabemomentaneineLaborversioninstalliert.KannichFreetzeinfachdarüberflashen">Ich habe momentan eine Laborversion installiert. Kann ich Freetz einfach darüber flashen?</h3>
<p>
Es ist ratsam die Box zunächst zu recovern. Anschliessend den letzten Finalrelease aufspielen (falls es eine aktuellere Firmware gibt als das Recovery-Image). Außerdem sollte man insbesondere nach einer Aktualisierung von einer Laborversion den Browsercache löschen (auch wenn man die AVM Recovery auf die Box gespielt hat).
</p>
<p>
<strong>WICHTIG</strong>: Vor dem Recovern (mindestens) die aktuellen Zugangsdaten bereithalten (alternativ Start-Code). Zugangsdaten findet man als 1&amp;1 Kunde beispielsweise im 1&amp;1 Controllcenter unter "Zugangsdaten".
</p>
<h3 id="IchhabeeinealteFreetz-FirmwareaufderBox">Ich habe eine alte Freetz-Firmware auf der Box</h3>
<h4 id="UpdatevonFreetz-VersionXYaufFreetz-VersionYZ:">Update von Freetz-Version XY auf Freetz-Version YZ:</h4>
<p>
In diesem Fall muss <strong>nur</strong> ein neues Freetz kompiliert / gebaut werden. Wie das geht ist <a class="wiki" href="help/howtos/common/install.html#Durchführung">hier</a> oder <a class="wiki" href="help/howtos/common/newbie.html">hier für Newbies</a> beschrieben.<br />
</p>
<h4 id="WennAVMeineneueFirmwareaufdenMarktbringt">Wenn AVM eine neue Firmware auf den Markt bringt</h4>
<p>
In diesem Fall muss Freetz ebenfalls neu gebaut werden, jedoch muss man eine Freetz-Version benutzen die dieses neue AVM-Firmware bereits unterstützt. Welche Firmware-Versionen von welcher Freetz Version unterstützt wird kann man hier nachgelesen: <a class="wiki" href="FAQ.html#WelcheBoxenundwelcheFirmwareswerdendurchFreetzunterstützt:">Unterstützte Firmwares in den unterschiedlichen Freetz-Versionen</a> <br />
</p>
<p>
Es empfiehlt sich in diesem Fall, Freetz neu auszuchecken und für die neue AVM Firmware komplett neu zu kompilieren, anstatt eine "alte" Build-Umgebung wiederzuverwenden (auch <em>make distclean</em> oder <em>make dirclean</em> sind unter Umständen nicht so effektiv, wie von vorne anzufangen).
</p>
<h2 id="Konfiguration">Konfiguration</h2>
<h3 id="WolandendiediversenKonfigurationenaufderFritzbox">Wo landen die diversen Konfigurationen auf der Fritzbox?</h3>
<blockquote>
<p>
Sämtliche Konfigurationen auf der Fritzbox liegen unter /tmp/flash. Dies ist zu beachten, wenn man eine Freetz-FW baut, da die Konfigurationen damit nicht im festen Firmware-Teil im Image liegen. Alles unter /tmp/flash wird daher beim FW-Update auch nicht verändert, so dass die diversen Konfigurationen nach einem FW-Update auch erhalten bleiben. Wichtig ist, dass man nach Änderungen an Konfigurationsdateien unter /tmp/flash noch das Kommando "modsave" in der Konsole aufruft, damit sie auch gespeichert werden. Näheres dazu folgt weiter unten.
</p>
</blockquote>
<h3 id="KonfigurationinderaktuellenSicherheitsstufenichtverfügbar">Konfiguration in der aktuellen Sicherheitsstufe nicht verfügbar!</h3>
<blockquote>
<p>
Es gibt verschiedene Sicherheitsstufen. Je nach ausgewählter Stufe sind nicht alle Konfigurationsdateien änderbar.
Um die Sicherheitsstufe zu ändern sind folgende Befehle direkt in der Konsole der Box per Telnet oder SSH auszuführen (geht leider nicht per Rudi-Shell, denn die benötigt selbst eine Sicherheitsstufe "0").
</p>
</blockquote>
<blockquote>
<p>
Ermitteln der aktuellen Sicherheitsstufe (hier: Freetz-1.1.4):
</p>
<pre class="wiki">cat /tmp/flash/security
</pre></blockquote>
<blockquote>
<p>
<strong>Freetz-1.1.x und älter:</strong>
</p>
<pre class="wiki">echo 0 &gt; /tmp/flash/security &lt;--- Bsp. #1: Setzen von Stufe "0" (keine Restriktionen, VORSICHT!)
modsave                      &lt;--- Speichern der neuen Sicherheitsstufe
</pre></blockquote>
<blockquote>
<p>
<strong>Ab Freetz-1.2.x und SVN-trunk &ge;<a class="changeset" href="/changeset/3318" title=" * Move packages config files into folders (/tmp/flash)
  * mod, dnsmasq, ...">r3318</a>:</strong>
</p>
<pre class="wiki">echo 1 &gt; /tmp/flash/mod/security &lt;--- Bsp. #2: Setzen von Stufe "1" (Konfigurationsdateien editierbar)
modsave                          &lt;--- Speichern der neuen Sicherheitsstufe
</pre></blockquote>
<blockquote>
<p>
Erlaubte Werte mit Erläuterung (Default: 2):
</p>
<pre class="wiki"># 0 : no restrictions
# 1 : only configuration files without shell commands might be edited
# 2 : no configuration files might be edited
</pre></blockquote>
<h3 id="WiedeaktiviereichdasPasswortfürdieFreetz-Webseite">Wie deaktiviere ich das Passwort für die Freetz-Webseite?</h3>
<blockquote>
<p>
Folgende Befehle auf der Konsole ausführen:
</p>
<pre class="wiki">touch /tmp/flash/webcfg_conf
chmod +x /tmp/flash/webcfg_conf
modsave flash
/etc/init.d/rc.webcfg restart
</pre><p>
Hintergrund: Das Skript /tmp/flash/webcfg_conf wird gegenüber /etc/default.webcfg/webcfg_conf zum Erstellen der Konfigurationsdatei bevorzugt. Ein leeres Skript /tmp/flash/webcfg_conf erzeugt also eine leere Konfigurationsdatei ohne Passwort.
</p>
</blockquote>
<p>
<img src="../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> Für Freetz-1.1.x ist <em>/tmp/flash/webcfg_conf</em> durch <em>/tmp/flash/httpd_conf</em> zu ersetzen.
</p>
<h3 id="WieändereichdasPasswortfürdieFreetz-Webseite">Wie ändere ich das Passwort für die Freetz-Webseite?</h3>
<blockquote>
<p>
Das geht über das <a class="ext-link" href="http://fritz.box:81/cgi-bin/passwd.cgi"><span class="icon">​</span>Webinterface</a> selbst: <tt>http://fritz.box:81/cgi-bin/passwd.cgi</tt>
</p>
</blockquote>
<h3 id="WieändereichdasPasswortfürdieFreetz-WebseitesofernichesvergessenundTelnetSSH-Zuganghabe">Wie ändere ich das Passwort für die Freetz-Webseite sofern ich es vergessen und Telnet/SSH-Zugang habe?</h3>
<blockquote>
<p>
Erstmal das Freetz-Webif stoppen:
</p>
<pre class="wiki">/etc/init.d/rc.webcfg stop
</pre><p>
Dann mit vi in der Datei mod.cfg die Zeile, die mit export MOD_HTTPD_PASSWD beginnt, wie folgt abändern:
</p>
<pre class="wiki">vi /var/mod/etc/conf/mod.cfg
</pre><pre class="wiki">export MOD_HTTPD_PASSWD='$1$$zO6d3zi9DefdWLMB.OHaO.'
</pre><p>
Speichern der Änderung: 1x ESC drücken und <tt>:wq</tt> eingeben.<br />
Nun wieder das Freetz-Webif starten:
</p>
<pre class="wiki">/etc/init.d/rc.webcfg start
</pre><p>
Jetzt kann man sich mit dem Passwort "freetz" wieder einloggen.
</p>
</blockquote>
<blockquote>
<p>
Bitte beachtet, dass diese Änderung <strong>NICHT</strong> reboot-resistent ist. Heißt, nach einem Reboot habt ihr wieder das vormalige, unbekannte Passwort. <br />Deshalb sollte man vor einem Neustart der Box im freetz-Menü unter <em>Einstellungen</em> das Passwort ändern/neu setzen.
</p>
</blockquote>
<h3 id="Wieändereichdasroot-Passwort">Wie ändere ich das root-Passwort?</h3>
<blockquote>
<p>
Folgende Befehle auf der Konsole ausführen:
</p>
<pre class="wiki">passwd
modusers save
modsave flash
</pre><p>
Nach Eingabe des Befehls 'passwd' muss das Passwort eingegeben werden. Dabei wird das eingegebene Passwort 'nicht' angezeigt. Zu einfache Passwörter werden nicht akzeptiert.
</p>
</blockquote>
<h3 id="Änderndesroot-PasswortesüberdieRudi-Shell">Ändern des root-Passwortes über die Rudi-Shell</h3>
<p>
Wenn man das root-Passwort vergessen hat, aber noch Zugriff auf das Webinterface hat kann über die Rudi-Shell ein neues Passwort gesetzt werden:<br />
<tt>(echo neuespasswort; sleep 1; echo neuespasswort) | passwd</tt>
</p>
<h3 id="WarumkannichmichnacheinerFreetz-WiederherstellungnichtmehramAVM-WebUIanmelden">Warum kann ich mich nach einer Freetz-Wiederherstellung nicht mehr am AVM-WebUI anmelden?</h3>
<p>
Ist ein Passwort für das AVM-WebUI vergeben, wird dies als Hash in der ar7.cfg abgelegt und damit auch gesichert. Bei der Wiederherstellung setzt Freetz anstatt des ursprünglichen Passworts den Hash-String als Passwort. Im <a class="ext-link" href="http://wiki.ip-phone-forum.de/gateways:avm:howtos:mods:password_auslesen"><span class="icon">​</span>IP-Phone-Forum-Wiki</a> ist beschrieben, wie man über einen Shell-Zugang die Passwort-Hashes auslesen kann.
</p>
<h2 id="ProblemeimBetrieb">Probleme im Betrieb</h2>
<h3 id="varflashfreetztoobig">/var/flash/freetz too big</h3>
<blockquote>
<p>
Das von Freetz vorgegebene Limit für die maximale Größe der Konfiguration wurde überschritten. Dieses Limit ist ein Schutz, um nicht unbeabsichtigt das TFFS volllaufen zu lassen. Das Limit kann folgendermaßen erhöht werden, man sollte aber den Füllstand des TFFS im Auge behalten:
</p>
<pre class="wiki">modconf set mod MOD_LIMIT=&lt;bytes&gt;
modconf save mod
modsave flash
</pre></blockquote>
<p>
<img src="../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> Seit <a class="changeset" href="/changeset/5706" title=" * Remove variable MOD_LIMIT
  * max size for /var/flash/freetz is 32 KB ...">r5706</a> (trunk) wird das Setzen des Limits nicht mehr unterstützt.
</p>
<h3 id="KeinFTP-ZugriffnachFreetzmöglich">Kein FTP-Zugriff nach Freetz möglich</h3>
<p>
Hierbei handelt es sich um ein Problem das hauptsächlich in Freetz 1.1.x auftritt und wie im <a class="wiki" href="help/howtos/common/user.html">Howto</a> beschrieben gelöst werden kann.
</p>
<h2 id="EntfernenvonFreetzundanderenModifikationen">Entfernen von Freetz und anderen Modifikationen</h2>
<blockquote>
<p>
Im Ordner tools/images befindet sich ein uninstall image, das wie eine Firmware übers Webinterface geflasht wird und die Konfigurationsdateien entfernt. Da hiermit nur die Konfigurationsdateien entfernt werden ist natürlich auch noch eine original Firmware einzuspielen. Das "Update" sollte vor einem Neustart erfolgen, da die Konfigurationsdateien ansonsten wieder angelegt werden. Am Einfachsten ist der Weg über ein AVM Recover (Dateien gibts für jede Box auf dem AVM-FTP). Auch hier werden sämtliche Konfigurationsdateien von Freetz gelöscht.
</p>
</blockquote>
<h2 id="Sonstiges">Sonstiges</h2>
<h3 id="ÄndernderArbeitsgruppevonfreetz-linux">Ändern der Arbeitsgruppe von "freetz-linux"</h3>
<p>
Damit unter Windows 7 und Vista der virtuelle PC "FREETZ-LINUX" in der Netzwerkumgebung angezeigt wird, müssen der Client- und Host-PC in der gleichen "Arbeitsgruppe" befinden:<br />
</p>
<ul><li>Die erste Möglichkeit wäre, die Arbeitsgruppe des Host-PC in FREETZ zu ändern (und ist für Anfänger empfehlenswert).
</li></ul><ul><li>Die zweite und schönere Lösung ist es, die Arbeitsgruppe des virtuellen PC (also freetz-linux) anzupassen.<br />
Dazu geht man wie folgt vor:<br />
</li></ul><blockquote>
<p>
An freetz-linux anmelden<br />
Die smb.conf öffnen mit:
</p>
<pre class="wiki">sudo nano /etc/samba/smb.conf
</pre><p>
Dann zur workgroup runterscrollen und dort den Namen ändern.<br />
Die smb.conf speichern mit: "strg+x"<br />
</p>
</blockquote>
<blockquote>
<p>
Und zum Schluss Samba neu starten:
</p>
<pre class="wiki">sudo /etc/init.d/samba restart
</pre></blockquote>
<h3 id="WiefindeichdieIPmeinerVirtuellenMaschine">Wie finde ich die IP meiner Virtuellen Maschine</h3>
<p>
Die IP wird einem entweder beim Einloggen im Startbildschirm (Roter Kasten) oder mit folgendem Befehl : <strong>ifconfig</strong> in der VM angezeigt.<br />
Nach Eingabe von <strong>ifconfig</strong> sollte folgende Anzeige in der VM zu sehen sein.
</p>
<pre class="wiki">
eth0      Link encap:Ethernet  Hardware Adresse 08:00:27:45:53:49
          inet Adresse:192.168.XXX.203  Bcast:192.168.XXX.255  Maske:255.255.255.0
          inet6-Adresse: XXXX::XXXX:XXXX:XXXX:XXXX/XX Gültigkeitsbereich:Verbindung
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metrik:1
          RX packets:454 errors:0 dropped:0 overruns:0 frame:0
          TX packets:155 errors:0 dropped:0 overruns:0 carrier:0
          Kollisionen:0 SendewarteschlangenlÃ¤nge:1000
          RX bytes:59413 (59.4 KB)  TX bytes:24972 (24.9 KB)
          Interrupt:10 Basisadresse:0xd020

lo        Link encap:Lokale Schleife
          inet Adresse:127.0.0.1  Maske:255.0.0.0
          inet6-Adresse: ::1/128 Gültigkeitsbereich:Maschine
          UP LOOPBACK RUNNING  MTU:16436  Metrik:1
          RX packets:15 errors:0 dropped:0 overruns:0 frame:0
          TX packets:15 errors:0 dropped:0 overruns:0 carrier:0
          Kollisionen:0 SendewarteschlangenlÃ¤nge:0
          RX bytes:1122 (1.1 KB)  TX bytes:1122 (1.1 KB)


</pre><p>
Wie auf dem Auszug zu sehen hat die VM die <strong>192.168.XXX.203</strong> als IP bekommen. Die IP kann aber von System zu System anders lauten, das ist Abhängig vom IP-Bereich eures Systems. Sollte euch jedoch dort gar keine IP angezeigt werden, müsst ihr die Einstellungen eures PC's bzw. eures VM-Players erneut überprüfen. <br />  
</p>
<h2 id="WeiterführendeLinks">Weiterführende Links</h2>
<p>
<a class="wiki" href="help/fritz_faq.html">Sonstige Tips und Tricks zur Fritzbox allgemein</a>
</p>
</div>
          
          <div class="trac-modifiedby">
            <span><a href="FAQ%3Faction=diff&amp;version=185.html" title="Version 185 von cuma: Was bedeutet &#34;not available, no sources by AVM&#34;?">zuletzt geändert</a> <a class="timeline" href="/timeline?from=2013-10-26T17%3A22%3A14Z&amp;precision=second" title="Siehe Journal am 26.10.2013 17:22:14">vor 4 Jahren</a></span>
            <span class="trac-print">Zuletzt geändert am 26.10.2013 17:22:14</span>
          </div>
        
        
      </div><ul class="tags"><li class="header">Tags</li><li><a href="/tags/faq" rel="tag">faq</a> </li></ul>
      

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/chrome/screenshots/css/screenshots.css", "text/css");
    </script>
    <div id="altlinks">
      <h3>In anderen Formaten herunterladen:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="FAQ%3Fformat=txt">Reiner Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Betrieben mit <a href="/about"><strong>Trac 1.0.1</strong></a><br />
        von <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right"><div class="field" align="right"><form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_donations"/><input type="hidden" name="business" value="spenden@freetz.org"/><input type="hidden" name="item_name" value="Freetz Entwickler-Team"/><input type="hidden" name="no_shipping" value="1"/><input type="hidden" name="return" value=""/><input type="hidden" name="cn" value="Name oder IPPF-Pseudonym"/><input type="hidden" name="currency_code" value="EUR"/><input type="hidden" name="tax" value="0"/><input type="hidden" name="lc" value="DE"/><input type="hidden" name="bn" value="PP-DonationsBF"/><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Zahlen Sie mit PayPal - schnell, kostenlos und sicher!"/><img alt="" border="0" src="/pixel.gif" width="1" height="1"/></form></div></p>
    </div>
  </body>
</html>