<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>
      packages/samba – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="samba%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../packages.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="/wiki" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="/wiki"><img src="../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="https://www.google.com/search" method="get" onsubmit="; this.elements.namedItem('q').value = this.elements.namedItem('oq').value + ' site:freetz.github.io'">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="oq" size="18" value="" />
          <input type="hidden" name="q" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><li class="last"><a href="../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="/wiki">Wiki</a></li><li class="last"><a href="/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="samba.html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="/wiki/packages/samba.en" title="(not available)">English</a></li></ul></div><p /><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="/wiki">Wiki:</a><a class="pathentry" href="../packages.html" title="Zeige packages an">packages</a><span class="pathentry sep">/</span><a class="pathentry" href="samba.html" title="Zeige packages/samba an">samba</a>
</div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">

          <div id="wikipage" class="trac-content"><p>
</p><div class="wiki-toc"><h4>Inhaltsverzeichnis</h4><ol><li><a href="samba.html#PackageinsImageeinbinden">Package ins Image einbinden</a></li><li><a href="samba.html#VerwandteThemen">Verwandte Themen</a></li><li><a href="samba.html#KonfigurierendesPakets">Konfigurieren des Pakets</a><ol><li><a href="samba.html#AVMKonfiguration">AVM Konfiguration</a></li><li><a href="samba.html#FreetzKonfiguration">Freetz Konfiguration</a><ol><li><a href="samba.html#PaketeSamba">Pakete &rarr; Samba</a></li><li><a href="samba.html#EinstellungenSambaFreigaben">Einstellungen &rarr; Samba Freigaben</a></li><li><a href="samba.html#EinstellungenSambaErweitert">Einstellungen &rarr; Samba Erweitert</a></li></ol></li></ol></li></ol></div><p>
</p>
<h1 id="Samba">Samba</h1>
<p>
<span class="thumbnail-right"><span class="aux" style="width: 383px;"><a style="border-width: 1px;" href="/screenshots/204?format=raw" title="Samba Webinterface"><img src="/screenshots/204?width=381&amp;format=raw&amp;height=490" alt="Samba Webinterface" /></a><span class="description" style="width: 383px;"><a href="/screenshots/204" title="Samba Webinterface">Samba Webinterface</a></span></span></span>   Dieses Paket macht angeschlossen USB-Speicher oder das Dateisystem der FritzBox für Windows als Dateifreigabe verfügbar (die Beschreibung basiert auf freetz-1.2 mit Samba 3.0.37). Unter Linux kann dieser Speicher mittels <em>smbmount</em>, <em>cifsmount</em>, etc. verfügbar gemacht werden. Natürlich ergibt ein Samba-Server auf der FritzBox nur dann Sinn, wenn man einen USB-Datenträger angeschlossen hat oder wenn man einen <a class="wiki" href="davfs2.html">WebDav</a> im LAN bereitstellen möchte - ein Samba-Client kann jedoch durchaus auch genutzt werden, um der FritzBox externen Speicher zur Verfügung zu stellen - etwa von einem <a class="ext-link" href="http://de.wikipedia.org/wiki/Network_Attached_Storage"><span class="icon">​</span>NAS</a> Device.
</p>
<p>
Die Dateifreigabe ist zwar auch Bestandteil neuerer AVM Firmware, aber das Freetz-Paket erweitert die Möglichkeiten:
</p>
<table class="wiki">
<tr><td> </td><td> AVM<sup>1</sup> </td><td> freetz<sup>2</sup> </td><td> Samba<sup>3</sup>
</td></tr><tr><td> Automatische Freigabe von USB-Speicher </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> * mit / ohne Passwort </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> * nur lesen / lesen und schreiben </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> * für FAT, FAT32 </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> * für EXT2, EXT3, NTFS </td><td> -<sup>4</sup> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" /> </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> Arbeitsgruppe und Servername konfigurierbar </td><td> - </td><td> - </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> Dateigröße über 2GB </td><td> - </td><td> - </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> In der Netzwerkumgebung sichtbar </td><td> - </td><td> - </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> Manuell konfigurierte Freigaben </td><td> - </td><td> - </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> Master Browser </td><td> - </td><td> - </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr><tr><td> Detailierte Konfiguration des Servers </td><td> - </td><td> - </td><td> <img src="../../chrome/wikiextras-icons-16/tick.png" style="vertical-align: text-bottom" alt="(./)" />
</td></tr></table>
<p>
<sup>1</sup> wenn Dateifreigabe für das Modell vorgesehen ist<br /> <sup>2</sup> Freetz mit AVM-Samba<br /> <sup>3</sup> Freetz mit "eigenem" Samba<br /> <sup>4</sup> NTFS/EXT2 bei Modellen ab Generation x2xx (EXT2 nicht bei 7270v1), EXT3/4 bei Modellen ab Firmware 5.x
</p>
<h2 id="PackageinsImageeinbinden">Package ins Image einbinden</h2>
<p>
Im menuconfig unter <tt>Package selection -&gt; Standard packages</tt> befindet sich
</p>
<ul><li><em>Samba 3.0.37 smbd (Filesharing)</em> <br /> Damit wird Dateifreigabe möglich.
</li><li><em>Samba 3.0.37 nmbd (Nameservices)</em> <br /> Dies macht die FritzBox in der Netzwerkumgebung sichtbar. <tt>nmbd</tt> kann nur gewählt werden, wenn <tt>smbd</tt> ausgewählt ist.
</li></ul><h2 id="VerwandteThemen">Verwandte Themen</h2>
<p>
Unter <tt>Patches</tt> befindet sich
</p>
<ul><li><em>Patch USB storage names</em> &hellip; mit zusätzlichen Unterpunkten. <br /> Diese beeinflussen ebenfalls Details der Dateifreigabe.
</li><li><em>Remove smbd</em> <img src="../../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> Diese Option sollte deselektiert sein und wird bei der Auswahl des Samba-Packages aus menuconfig entfernt.
</li></ul><h2 id="KonfigurierendesPakets">Konfigurieren des Pakets</h2>
<h3 id="AVMKonfiguration">AVM Konfiguration</h3>
<p>
Die Optionen der original AVM Firmware sind unverändert verfügbar (unter <em>Erweiterte Einstellungen &rarr; USB-Geräte &rarr; USB-Speicher</em>) . Dies sind:
</p>
<ul><li>aktivieren / deaktivieren des Dateiservers (Samba)
</li><li>Zugriffsberechtigung für die automatischen Freigaben: nur lesen / lesen und schreiben
</li><li>Kennwort
</li></ul><h3 id="FreetzKonfiguration">Freetz Konfiguration</h3>
<p>
Im Freetz Webinterface werden die zusätzlichen Möglichkeiten des Pakets konfiguriert.
</p>
<h4 id="PaketeSamba">Pakete &rarr; Samba</h4>
<ul><li><strong>Arbeitsgruppe</strong> <br /> unter dieser Arbeitsgruppe wird der Server in der Netzwerkumgebung von Windows sichtbar
</li><li><strong>Name des Servers</strong> <br /> der Name des Server in seiner Arbeitsgruppe
</li><li><strong>Beschreibung des Servers</strong> <br /> und seine zusätzliche Beschreibung
</li><li>Optionen für den <strong>Master Browser</strong> <br /> Wenn mehrere Windows Systeme im gleichen Netzwerksegment vorhanden sind, übernimmt eines die Aufgabe, eine Liste mit verfügbaren Systemen zu verwalten. Die folgenden Parameter bestimmen, ob die FritzBox diese Aufgabe übernimmt und <em>Master Browser</em> wird. Details unter <a class="ext-link" href="http://us3.samba.org/samba/docs/using_samba/ch07.html#samba2-CHP-7-TABLE-2"><span class="icon">​</span>http://us3.samba.org/samba/docs/using_samba/ch07.html#samba2-CHP-7-TABLE-2</a>
<ul><li>OS Level für Election <br /> Mit dem Standardwert von 20 wird die FritzBox fast immer <em>Master Browser</em>.
</li><li>Bevorzugter Master <br /> Wenn dies gewählt ist, versucht die FritzBox nach dem Booten einen eventuell schon vorhanden Master Browser abzulösen.
</li></ul></li><li>Auswahl der <strong>Netzwerkschnittstelle</strong> <br /> Hier wird das Netzwerksegment angegeben, für das die Box die Dateifreigabe bereit stellt. Es kann leer gelassen werden. Dann gilt die Dateifreigabe für alle Netzwerksegment, in der sich die Box befindet. <br /> <img src="../../chrome/wikiextras-icons-16/exclamation.png" style="vertical-align: text-bottom" alt="/!\" /> <strong>Achtung:</strong> Wenn die Box direkt mit dem Internet verbunden ist, sollte man sicher sein der der interne Firewall in Ordnung ist. Sonst könnte das eine Angriffsmöglichkeit aus dem gesamten Internet eröffnen.
</li><li>Startmodus<br />Hier kann entweder <strong>automatisch</strong> oder <strong>manuell</strong> ausgewählt werden. (<em>TODO: Wird smbd auch von den Hotplug-Skripten gestartet</em>?)
</li></ul><p>
<span id="shares"></span>
</p>
<h4 id="EinstellungenSambaFreigaben">Einstellungen &rarr; Samba Freigaben</h4>
<p>
Zusätzlich zum USB-Speicher, der beim Anschließen automatisch eine Freigabe erzeugt, können hier statische Freigaben definiert werden. Z. B. das Dateisystem der FritzBox oder ausgewählte Verzeichnisse des USB-Speichers als selbständige Freigabe. <br /> Konfiguriert werden kann:
</p>
<ul><li><strong>Path</strong>: Der FritzBox-interne Pfad des Verzeichnisses, das freigegeben wird.
</li><li><strong>Name</strong>: Unter diesem Namen ist die Freigabe für Windows sichtbar
</li><li><strong>guest ok</strong>: <em>1</em>: Legt fest, dass auf diese Freigabe auch ohne Kennwort zugegriffen werden kann. Das Kennwort wird in der Konfiguration der FritzBox festgelegt.
</li><li><strong>read only</strong>: <em>1</em>: Auf diese Freigabe kann nur lesend zugegriffen werden. <em>0</em>: Lese- und Schreibzugriff
</li><li><strong>comment 1</strong>: <em>-</em>: Beschreibung folgt
</li><li><strong>comment 2</strong>: Beschreibung / Kommentar, den Windows mit dieser Freigabe anzeigt.
</li></ul><p>
<strong>Beispiel:</strong>
</p>
<pre class="wiki">/var/media/ftp/uStor01/Videos hdd1 1 0 - Videos
/var/media/ftp/uStor01/Bilder hdd1 1 0 - Bilder
/var/media/ftp/uStor01/Musik hdd1 1 0 - Musik
</pre><p>
Bei Nutzung eines USB-Speichers ist zu beachten, dass die Zugriffsrechte entsprechend gesetzt sein müssen. Wurde der Speicher an einem Fremdrechner z. B. mit ext2 oder ext3 formatiert, sind oft keine Schreibrechte und auch nicht <tt>ftpuser</tt> als Eigentümer gesetzt. In der FRITZBox kann das mit folgenden Kommandos korrigiert werden:
</p>
<pre class="wiki">chmod -R 777 uStor01
</pre><pre class="wiki">chown ftpuser -R uStor01
</pre><p>
<span id="sharesx"></span>
</p>
<h4 id="EinstellungenSambaErweitert">Einstellungen &rarr; Samba Erweitert</h4>
<p>
Hier können sich die Experten austoben und beliebige globale Optionen für Samba definieren: Der eingegebene Text wird verbatim ans Ende der <tt>[global]</tt> - Sektion in der Samba-Konfiguration eingefügt. <br /> Details unter <a class="ext-link" href="http://samba.org/samba/docs/using_samba/ch06.html"><span class="icon">​</span>http://samba.org/samba/docs/using_samba/ch06.html</a>
</p>
<p>
Weitere Tuningmöglichkeiten gibt es hier: <a class="ext-link" href="http://lug.krems.cc/docu/samba/appb_02.html"><span class="icon">​</span>http://lug.krems.cc/docu/samba/appb_02.html</a>
</p>
<p>
Für Performanceverbesserungen kann folgendes unter 'Erweitert' eingetragen werden:<br />
</p>
<pre class="wiki">socket options = TCP_NODELAY IPTOS_LOWDELAY
read raw = yes
write raw = yes
oplocks = yes
max xmit = 65535
dead time = 15
getwd cache = yes
</pre><p>
Nichtexperten können diese Einstellung einfach leer lassen.<br /> Falls bei Windows 7 64-bit ein BSOD auftritt "oplocks = no" setzen, siehe <a class="ext-link" href="http://www.ip-phone-forum.de/showpost.php?p=1538911&amp;postcount=1"><span class="icon">​</span>IPPF</a>.
</p>
</div>

      </div><ul class="tags"><li class="header">Tags</li><li><a href="/tags/daemons" rel="tag">daemons</a> </li><li><a href="/tags/filesystem" rel="tag">filesystem</a> </li><li><a href="../packages.html" rel="tag">packages</a> </li><li><a href="/tags/samba" rel="tag">samba</a> </li><li><a href="/tags/server" rel="tag">server</a> </li><li><a href="/tags/%C3%BCberarbeiten" rel="tag">überarbeiten</a> </li></ul>

    </div>
    <script type="text/javascript">
        jQuery.loadStyleSheet("/chrome/screenshots/css/screenshots.css", "text/css");
    </script>
    </div>
  </body>
</html>
