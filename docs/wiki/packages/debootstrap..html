<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  


  <head>
    <title>
      packages/debootstrap – Freetz
    </title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--[if IE]><script type="text/javascript">
      if (/^#__msie303:/.test(window.location.hash))
        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));
    </script><![endif]-->
        <link rel="search" href="http://freetz.org/search" />
        <link rel="help" href="../TracGuide.html" />
        <link rel="alternate" href="debootstrap%3Fformat=txt" type="text/x-trac-wiki" title="Reiner Text" />
        <link rel="up" href="../packages.html" title="Übergeordnete Wiki-Seite anzeigen" />
        <link rel="start" href="http://freetz.org/wiki" />
        <link rel="stylesheet" href="../../chrome/common/css/trac.css" type="text/css" /><link rel="stylesheet" href="../../chrome/common/css/wiki.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/phrases.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-300.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikiextras/css/boxes-narrow-toc.css" type="text/css" /><link rel="stylesheet" href="../../wikicss.css" type="text/css" /><link rel="stylesheet" href="../../chrome/tags/css/tractags.css" type="text/css" /><link rel="stylesheet" href="../../chrome/wikinegotiator/css/langmenu-ctxnav.css" type="text/css" />
        <link rel="shortcut icon" href="http://freetz.org/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="http://freetz.org/favicon.ico" type="image/x-icon" />
      <link type="application/opensearchdescription+xml" rel="search" href="http://freetz.org/search/opensearch" title="Freetz durchsuchen" />
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/jquery.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/babel.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/messages/de.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/trac.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/search.js"></script>
      <script type="text/javascript" charset="utf-8" src="../../chrome/common/js/folding.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#content").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $("#content").find(".wikianchor").each(function() {
          $(this).addAnchor(babel.format(_("Link to #%(id)s"), {id: $(this).attr('id')}));
        });
        $(".foldable").enableFolding(true, true);
      });
    </script>
  </head>
  <body>
    <div id="banner">
      <div id="header">
        <a id="logo" href="http://freetz.org/wiki"><img src="../../chrome/common/freetz_motd.png" alt="Freetz" /></a>
      </div>
      <form id="search" action="http://freetz.org/search" method="get">
        <div>
          <label for="proj-search">Suche:</label>
          <input type="text" id="proj-search" name="q" size="18" value="" />
          <input type="submit" value="Suche" />
        </div>
      </form>
      <div id="metanav" class="nav">
    <ul>
      <li class="first"><a href="http://freetz.org/login">Anmelden</a></li><li><a href="http://freetz.org/prefs">Einstellungen</a></li><li><a href="../TracGuide.html">Hilfe/Anleitung</a></li><li><a href="http://freetz.org/about">Über Trac</a></li><li><a href="http://freetz.org/notification" title="Wiki Pages Change Notifications">My Notifications</a></li><li><a href="http://freetz.org/register">Registrieren</a></li><li class="last"><a href="../Impressum.html">Impressum</a></li>
    </ul>
  </div>
    </div>
    <div id="mainnav" class="nav">
    <ul>
      <li class="first active"><a href="http://freetz.org/wiki">Wiki</a></li><li><a href="http://freetz.org/timeline">Journal</a></li><li><a href="http://freetz.org/roadmap">Projektplan</a></li><li><a href="http://freetz.org/browser">Quellen durchsehen</a></li><li><a href="http://freetz.org/report">Tickets anzeigen</a></li><li><a href="http://freetz.org/search">Suche</a></li><li><a href="http://freetz.org/tags">Tags</a></li><li><a href="http://freetz.org/downloads">Downloads</a></li><li class="last"><a href="http://freetz.org/screenshots">Bildschirmfotos</a></li>
    </ul>
  </div>
    <div id="langmenu"><ul><li class="first"><span title="Select a language of wiki content">Language:</span></li><li class=" active"><a class="" href="debootstrap..html" title="displaying language (default)">German</a></li><li class=" last"><a class=" notexist" href="http://freetz.org/wiki/packages/debootstrap.en" title="(not available)">English</a></li></ul></div><div id="main">
      <div id="pagepath" class="noprint">
  <a class="pathentry first" title="Zeige WikiStart an" href="http://freetz.org/wiki">Wiki:</a><a class="pathentry" href="../packages.html" title="Zeige packages an">packages</a><span class="pathentry sep">/</span><a class="pathentry" href="debootstrap.html" title="Zeige packages/debootstrap an">debootstrap</a>
</div>
      <div id="ctxtnav" class="nav">
        <h2>Kontext-Navigation</h2>
        <ul>
          <li class="first"><a href="../packages.html">Aufwärts</a></li><li><a href="../WikiStart.html">Startseite</a></li><li><a href="../TitleIndex.html">Inhaltsverzeichnis</a></li><li><a href="debootstrap%3Faction=history.html">Änderungshistorie</a></li><li class="last"><a href="http://freetz.org/notification/packages/debootstrap." title="Watch Page">Watch Page</a></li>
        </ul>
        <hr />
      </div>
    <div id="content" class="wiki">
      <div class="wikipage searchable">
        
          <div id="wikipage" class="trac-content"><h1 id="Debootstrap">Debootstrap</h1>
<p>
<strong>Debootstrap</strong> kann verwendet werden, um ein Debian System von Grund auf neu zu installieren. Dies kann aus einem laufenden System heraus auf einer anderen Partition oder auch in einem Verzeichnis auf dem aktuellen System geschehen, beispielsweise um eine andere Release-Version von Debian zu testen. Auch ist es möglich, mittels <em>debootstrap</em> eine Installation von Debian von einer anderen Linux-Distribution aus vorzunehmen.
</p>
<p>
<em>Debootstrap</em> benötigt dazu initial weder <a class="ext-link" href="http://de.wikipedia.org/wiki/Debian_Package_Manager"><span class="icon">​</span>dpkg</a> noch <a class="ext-link" href="http://de.wikipedia.org/wiki/Advanced_Packaging_Tool"><span class="icon">​</span>apt</a>. Das initiale System wird erstellt, indem die Debian-Pakete von einer Mirror-Site heruntergeladen und vorsichtig in ein lokales Verzeichnis entpackt werden, in welches man schließlich "<a class="ext-link" href="http://de.wikipedia.org/wiki/Chroot"><span class="icon">​</span>chrooten</a>" kann.
</p>
<p>
Sofern z.B. unter Debian, Ubuntu <em>Debootstrap</em> noch nicht installiert ist, kann dies mit
</p>
<pre class="wiki">sudo apt-get install -y debootstrap
</pre><p>
nachgeholt werden.
</p>
<h2 id="DebianinwenigenSchrittennutzen">Debian in wenigen Schritten nutzen</h2>
<p>
Zuerst mit Debootstrap das Debian-System herunterladen. Dies kann von jedem anderen System aus gemacht werden, welches das Debootstrap-Programm enthält (z.B. auch von der gefreezten Box mit ausgewähltem Debootstrap-Paket). Sonst ist nur noch erforderlich, dass die gemountete Partition ext2,3 oder 4 als Dateisystem besitzt. Da es häufig Probleme mit dem aktuellen lenny Debian gibt wird hier etch verwendet. Es empfiehlt sich die ersten beiden Befehle am Computer auszuführen, da dies wesentlich schneller ist. In diesem Falle sollte man <em>&mdash;foreign</em> zu den Argumenten hinzufügen.
Für alle gängigen FritzBox Modelle bis x2xx <em>&mdash;arch=mipsel</em> eintragen, für die aktuellen x3xx Modelle <em>&mdash;arch=mips</em> eintragen 
</p>
<p>
<strong>Hinweis</strong>:
</p>
<p>
Beim angeschlossenen USB-Gerät kann die Bezeichnung variieren, in den unten angezeigten Pfaden lautet die Bezeichnung <em>uStor01</em>, bei anderen Geräten kann diese auch Generic-FlashDisk-01 lauten. Um die Bezeichnung herauszufinden, gibt es 3 Möglichkeiten, entweder per <a class="ext-link" href="http://192.168.178.1/nas/index.lua"><span class="icon">​</span>Weboberfläche</a> (FRITZNAS), FTP (Wurzelverzeichnis (root) muss sichtbar sein) oder per aktiviertem Telnet.
</p>
<p>
<strong>Telnet</strong> (in der Übersicht wird das USB-Gerät aufgelistet)
</p>
<pre class="wiki">ls /var/media/ftp/
</pre><p>
<strong>Ausgabe könnte in wie folgt sein</strong> (Variiert nach Modell/Firmware):
</p>
<pre class="wiki">FRITZ-NAS.txt         FRITZ-Song.mp3        Generic-FlashDisk-01  lost+found
FRITZ-Picture.jpg     FRITZ-Video.mp4       Onlinespeicher
</pre><p>
<strong>Mit <em>Etch</em> ausprobieren</strong> (veraltete Version):
</p>
<p>
(FritzBox Modelle bis Version x2xxx)
</p>
<pre class="wiki">debootstrap --foreign --arch=mipsel etch /var/media/ftp/uStor01/debian http://ftp.de.debian.org/debian
</pre><p>
(FritzBox Modelle ab Version x3xxx)
</p>
<pre class="wiki">debootstrap --foreign --arch=mips etch /var/media/ftp/uStor01/debian http://ftp.de.debian.org/debian
</pre><p>
<strong>Mit <em>Wheezy</em> ausprobieren</strong> (aktuelle Version):
</p>
<p>
(FritzBox Modelle bis Version x2xxx)
</p>
<pre class="wiki">debootstrap --foreign --arch=mipsel wheezy /var/media/ftp/uStor01/debian http://ftp.de.debian.org/debian
</pre><p>
(FritzBox Modelle ab Version x3xxx)
</p>
<pre class="wiki">debootstrap --foreign --arch=mips wheezy /var/media/ftp/uStor01/debian http://ftp.de.debian.org/debian
</pre><p>
anschließend
</p>
<pre class="wiki">chroot /var/media/ftp/uStor01/debian /debootstrap/debootstrap --second-stage
</pre><p>
Sollte man Debootstrap an einem anderen PC durchgeführt haben, steckt man den betreffenden USB-Stick nun in die FritzBox. Um das Debian jetzt noch nutzen zu können, muss das /proc/ Verzeichnis für das Debian bereitgestellt werden und wie bereits erwähnt "gechrootet" werden:
</p>
<pre class="wiki">mount -t proc proc /var/media/ftp/uStor01/debian/proc
chroot /var/media/ftp/uStor01/debian bash
</pre><p>
Wenn alles gut geht sollte folgender Prompt da sein
</p>
<pre class="wiki">root@fritz
</pre><p>
Ab jetzt kann man sich wie gewohnt nach einem apt-get update mit apt-get install zusätzliche Pakete installieren.
</p>
<h2 id="Erfahrungswerte">Erfahrungswerte</h2>
<p>
Die Erst-Installation auf einer 7170 dauert etwa 2 Stunden, die sich mit ca. 45/75 Minuten auf die ersten 2 Schritte verteilen. Der belegte Speicherplatz auf einem EXT3-formatierten Datenträger liegt bei ca 505 MB (März 2011). Im Gegensatz zur späteren Nutzung (speziell von Aptitude) benötigt die Installation noch keinen Swap, steigert allerdings den CPU-Verbrauch während dieser Zeit auf 100%.
</p>
<h2 id="WeiterführendeLinks">Weiterführende Links</h2>
<ul><li><a class="ext-link" href="http://www.linuxwiki.de/debootstrap"><span class="icon">​</span>Linux-Wiki: Debootstrap</a>
</li><li><a class="ext-link" href="http://debiananwenderhandbuch.de/debootstrap.html"><span class="icon">​</span>Debian-Anwenderhandbuch: Debootstrap</a>
</li><li><a class="ext-link" href="http://www.debian-administration.org/articles/426"><span class="icon">​</span>Installing new Debian systems with debootstrap</a>
</li><li><a class="ext-link" href="http://www.ip-phone-forum.de/showthread.php?t=169744"><span class="icon">​</span>IPPF-Thread über Mailserver in Debian chroot</a>
</li><li><a class="ext-link" href="http://wehavemorefun.de/fritzbox/index.php/Debootstrap"><span class="icon">​</span>Debootstrap im Wehavemorefun Wiki</a>
</li></ul><h4 id="CommentbyoliveronSa26Feb201111:26:45CET">Comment by oliver on Sa 26 Feb 2011 11:26:45 CET</h4>
<p>
Die Erstellung des Debootstrap ist relativ einfach und gut beschrieben. Aber wie nutzt man das jetzt? Den proc mount kann man in die rc.custom schreiben. Und was macht man mit dem chroot? Kann man beim Starten eine Screen-Session erstellen und sich dann dahin verbinden?
Oder jedesmal den chroot Befehl eingeben?
</p>
<h4 id="Commentbymandy28onSa26Feb201113:09:38CET">Comment by mandy28 on Sa 26 Feb 2011 13:09:38 CET</h4>
<p>
chroot per Konsole starten oder bequem mit einem addon welches dann gleichzeitig für binary ist die im chroot laufen soll
</p>
<h4 id="CommentbyoliveronDi01Mär201121:09:47CET">Comment by oliver on Di 01 Mär 2011 21:09:47 CET</h4>
<p>
Ich hab jetzt debootstrap installiert, aber die /etc/apt/sources.list ist leer!? Könntest du noch beschreiben was da rein muss, dass man Pakete installieren kann.
</p>
<h4 id="Commentbymandy28onDi01Mär201122:30:28CET">Comment by mandy28 on Di 01 Mär 2011 22:30:28 CET</h4>
<p>
sollte so aussehen
</p>
<pre class="wiki">deb http://ftp.de.debian.org/debian stable main
</pre><h4 id="CommentbyoliveronDi01Mär201122:43:32CET">Comment by oliver on Di 01 Mär 2011 22:43:32 CET</h4>
<p>
Sollte das da drin stehen oder muss man das selbst reinschreiben?
</p>
<h4 id="Commentbymandy28onDi01Mär201122:54:33CET">Comment by mandy28 on Di 01 Mär 2011 22:54:33 CET</h4>
<p>
sollte normalerweise so oder ähnlich schon drin stehn
</p>
<h4 id="CommentbyMyRaCoLionMi02Mär201102:55:27CET">Comment by MyRaCoLi on Mi 02 Mär 2011 02:55:27 CET</h4>
<p>
Funktioniert das mit der aktuellen stable, squeeze? Lenny ist hier noch irrtümlich als stable aufgeführt.
</p>
<h4 id="Commentbymandy28onMi02Mär201108:15:05CET">Comment by mandy28 on Mi 02 Mär 2011 08:15:05 CET</h4>
<p>
mit den entsprechenden scrips in debootstrap ja , dann aber über anderen Mirror z.B.:
</p>
<pre class="wiki">debootstrap --foreign --arch=mipsel squeeze /var/media/ftp/uStor01/squeeze http://ftp.de.debian.org/debian
chroot /var/media/ftp/uStor01/squeeze /debootstrap/debootstrap --second-stage
</pre><h4 id="CommentbykriegaexonMo12Dez201123:05:51CET">Comment by kriegaex on Mo 12 Dez 2011 23:05:51 CET</h4>
<p>
Also ich kriege nach dem Erstellen von Debootstrap auf dem PC und dem Kopieren auf die 7170 via NFS beim chroot nur die Fehlermeldung: "FATAL: kernel too old"
</p>
<h4 id="CommentbyzockyonDo26Jul201218:43:38CEST">Comment by zocky on Do 26 Jul 2012 18:43:38 CEST</h4>
<p>
zu diesem zu alter fb kernel problem
</p>
<p>
7170 Firmware-Version 29.04.76 hatte ich auch alles was höer als etch is die meldung "FATAL: kernel too old"  da must  einfach ne ältere dist nehmen bis  es geht 
</p>
<p>
die sources.list muss dan eventl auf archive server angepasst werden
</p>
<p>
in meinem fall funktioniert das im moment mit diesem einträgen :
</p>
<p>
deb http://archive.debian.org/debian-archive/debian/ etch main contrib non-free<br />deb-src http://archive.debian.org/debian-archive/debian/ etch main contrib non-free
</p>
<p>
aba das kann sich je nach dist und aktuellem zeitraum ändern
</p>
<p>
<a class="missing wiki">AddComment?</a>
</p>
</div>
          
          <div class="trac-modifiedby">
            <span><a href="debootstrap%3Faction=diff&amp;version=32.html" title="Version 32 von Padman: +Erweitert">zuletzt geändert</a> <a class="timeline" href="http://freetz.org/timeline?from=2014-06-04T19%3A04%3A50Z&amp;precision=second" title="Siehe Journal am 04.06.2014 19:04:50">vor 4 Jahren</a></span>
            <span class="trac-print">Zuletzt geändert am 04.06.2014 19:04:50</span>
          </div>
        
        
      </div><ul class="tags"><li class="header">Tags</li><li><a href="../packages.html" rel="tag">packages</a> </li><li><a href="http://freetz.org/tags/tools" rel="tag">tools</a> </li></ul>
      

    </div>
    <div id="altlinks">
      <h3>In anderen Formaten herunterladen:</h3>
      <ul>
        <li class="last first">
          <a rel="nofollow" href="debootstrap%3Fformat=txt">Reiner Text</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="../../chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Betrieben mit <a href="http://freetz.org/about"><strong>Trac 1.0.1</strong></a><br />
        von <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right"><div class="field" align="right"><form action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_donations"/><input type="hidden" name="business" value="spenden@freetz.org"/><input type="hidden" name="item_name" value="Freetz Entwickler-Team"/><input type="hidden" name="no_shipping" value="1"/><input type="hidden" name="return" value="http://freetz.org"/><input type="hidden" name="cn" value="Name oder IPPF-Pseudonym"/><input type="hidden" name="currency_code" value="EUR"/><input type="hidden" name="tax" value="0"/><input type="hidden" name="lc" value="DE"/><input type="hidden" name="bn" value="PP-DonationsBF"/><input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Zahlen Sie mit PayPal - schnell, kostenlos und sicher!"/><img alt="" border="0" src="http://freetz.org/pixel.gif" width="1" height="1"/></form></div></p>
    </div>
  </body>
</html>