diff -Naur include/defaults.h include/defaults.h
--- include/defaults.h	1970-01-01 01:00:00.000000000 +0100
+++ include/defaults.h	2010-11-15 01:41:00.000000000 +0100
@@ -20,7 +20,7 @@
 #ifndef DEFAULTS_H
 #define DEFAULTS_H

-#define DEFAULT_MASTER_MAP_NAME	"auto.master"
+#define DEFAULT_MASTER_MAP_NAME	"/etc/auto.master"

 #define DEFAULT_TIMEOUT			600
 #define DEFAULT_NEGATIVE_TIMEOUT	60
diff -Naur Makefile.conf Makefile.conf
--- Makefile.conf	1970-01-01 01:00:00.000000000 +0100
+++ Makefile.conf	2006-01-12 13:52:14.000000000 +0100
@@ -0,0 +1,79 @@
+#
+# $id$
+#
+# Makefile.conf.in
+#
+# Pattern file to be filled in by configure; contains specific options to
+# build autofs.
+#
+
+#CC = mipsel-linux-gcc
+#CFLAGS = -fPIE -pipe -Os
+#LDFLAGS = -pie -s
+#STRIP = mipsel-linux-strip
+
+# Do we build with -fpie?
+DAEMON_CFLAGS  =
+DAEMON_LDFLAGS =
+
+# Special parameters for glibc (libc 6)
+LIBNSL    =
+LIBRESOLV =
+
+# Hesiod support: yes (1) no (0)
+HESIOD = 0
+LIBHESIOD =
+HESIOD_FLAGS =
+
+# LDAP support: yes (1) no (0)
+LDAP = 0
+LIBLDAP=
+LDAP_FLAGS =
+
+# NIS+ support: yes (1) no (0)
+NISPLUS = 0
+
+# SMBFS support: yes (1) no (0)
+SMBFS = 0
+
+# Support for calling e2fsck when mounting ext2 filesystems
+EXT2FS = 0
+
+# Support for calling e3fsck when mounting ext3 filesystems
+EXT3FS = 0
+
+LEX = flex
+YACC = bison
+RPCGEN = rpcgen
+RANLIB = ranlib
+
+#
+# Note: the DESTDIR define is so you can build autofs into a temporary
+# directory and still have all the compiled-in paths point to the right
+# place.
+#
+
+# Common install prefix
+prefix =
+exec_prefix = ${prefix}
+
+# Directory for autofs modules
+#autofslibdir = ${exec_prefix}/lib/autofs
+
+# Location for configuration init script
+#autofsconfdir = /etc/sysconfig
+
+# Location for autofs maps
+autofsmapdir = /tmp/flash/autofs
+
+# Location for autofs fifos
+autofsfifodir = /var/run/automount
+
+# Location for autofs flag file
+autofsflagdir = /var/run/automount
+
+# Where to install the automount program
+sbindir = ${exec_prefix}/sbin
+
+# Where to install man pages
+datarootdir = ${prefix}/share
+mandir = ${datarootdir}/man
+
+# Location for init.d files
+initdir = /etc/init.d
+
diff -Naur include/config.h include/config.h
--- include/config.h	1970-01-01 01:00:00.000000000 +0100
+++ include/config.h	2006-01-12 11:06:38.000000000 +0100
@@ -0,0 +1,32 @@
+/* include/config.h.  Generated by configure.  */
+/* -*- c -*-
+ *
+ * config.h.in: Pattern file for autofs to be filled in by configure
+ *
+ */
+
+/* Program paths */
+#define HAVE_MOUNT 1
+#define PATH_MOUNT "/bin/mount"
+
+#define HAVE_UMOUNT 1
+#define PATH_UMOUNT "/bin/umount"
+
+#define HAVE_MODPROBE 1
+#define PATH_MODPROBE "/sbin/modprobe"
+
+#define HAVE_LINUX_PROCFS 1
+
+/* #undef HAVE_SMBMOUNT */
+/* #undef PATH_SMBMOUNT */
+
+/* #undef HAVE_E2FSCK */
+/* #undef PATH_E2FSCK */
+
+/* #undef HAVE_E3FSCK */
+/* #undef PATH_E3FSCK */
+
+/* Define this option if mount(8) supports the -s (sloppy) option */
+/* #undef HAVE_SLOPPY_MOUNT */
+
+/* #undef ENABLE_EXT_ENV */
diff -Naur autofs-4.1.4-orig/modules/Makefile modules/Makefile
--- modules/Makefile	2007-09-29 12:45:56.000000000 +0200
+++ modules/Makefile	2007-09-29 12:46:16.000000000 +0200
@@ -5,13 +5,13 @@
 -include ../Makefile.conf
 include ../Makefile.rules

-SRCS :=	lookup_yp.c  lookup_file.c  lookup_program.c  lookup_userhome.c \
+SRCS :=	lookup_file.c  lookup_program.c  lookup_userhome.c \
 	lookup_multi.c lookup_hosts.c \
 	parse_sun.c    \
 	mount_generic.c  mount_nfs.c  mount_afs.c  mount_autofs.c \
 	mount_changer.c  mount_bind.c

-MODS :=	lookup_yp.so lookup_file.so lookup_program.so lookup_userhome.so \
+MODS :=	lookup_file.so lookup_program.so lookup_userhome.so \
 	lookup_multi.so lookup_hosts.so \
 	parse_sun.so \
 	mount_generic.so mount_nfs.so mount_afs.so mount_autofs.so \
@@ -47,6 +47,11 @@
   endif
 endif

+ifeq ($(YP), 1)
+  SRCS += lookup_yp.c
+  MODS += lookup_yp.so
+endif
+
 CFLAGS += -I../include -I../lib -fPIC -D_GNU_SOURCE
 CFLAGS += -DAUTOFS_LIB_DIR=\"$(autofslibdir)\"
 CFLAGS += -DAUTOFS_MAP_DIR=\"$(autofsmapdir)\"
